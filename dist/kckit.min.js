!function(e){var t={};function r(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(i,a,function(t){return e[t]}.bind(null,a));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=9)}([function(e,t,r){"use strict";var i=[82,88],a=[553],s=i.concat(a),n=[411,412],o=i.concat(n),u=[380,529,381,536],p=[526,534,544,396,560].concat(u),l=[216,217],c=[547,146],f=l.concat(c),h=[207,208,390,391,230,231,232,233],m=[195,407],d=h.concat(m),b=[234,235,236,237],y=[437,147],g=b.concat(y),v=[238,239,240,241],S=[326,419],_=v.concat(S),C=[225,226,227,362,300,228,316,322,317,556,320,557,312,558,313,559,329,354,355,294,301],D=[566,567,568],A=C.concat(D),R=[542,563,543],I=[229],q=R.concat(I),B=[571,576,439,364],L=[].concat(B,[515,393,519,394]),x=[440,360],N=[544,396,549,397,433,438,545,550],k=[561,681,562,689],M=[].concat(x,N,k);e.exports={BB_KongouClass2ndRemodel:[149,150,151,152],BB_IseClassRemodel:i,BB_IseClass2ndRemodel:a,BB_IseClassRemodelAll:s,BB_FusouClass2ndRemodel:n,BB_IseClassRemodel_PLUS_FusouClass2ndRemodel:o,CVE:p,CVE_TaiyouClassRemodelAll:u,CL_KumaClassRemodel:l,CL_KumaClass2ndRemodel:c,CL_KumaClassRemodelAll:f,CL_NagaraClass2ndRemodel:[488,487],DD_FubukiClass2ndRemodel:[426,420],DD_AyanamiClassRemodel:h,DD_AyanamiClass2ndRemodel:m,DD_AyanamiClassRemodelAll:d,DD_AkatsukiClassRemodel:b,DD_AkatsukiClass2ndRemodel:y,DD_AkatsukiClassRemodelAll:g,DD_HatsuharuClassRemodel:v,DD_HatsuharuClass2ndRemodel:S,DD_HatsuharuClassRemodelAll:_,DD_ShiratsuyuClass2ndRemodel:[497,145,498,144,469],DD_AsashioClass2ndRemodel:[463,468,199,489,490,198,464,470],DD_KagerouClassRemodel:C,DD_KagerouClassRemodelB:[557,558],DD_KagerouClass2ndRemodel:D,DD_KagerouClassRemodelAll:A,DD_YuugumoClass2ndRemodel:R,DD_YuugumoClass2ndRemodel_PLUS_ShimakazeRemodel:q,DD_ShimakazeRemodel:I,rn:L,rn_BB:B,usn:M,usn_BB:x,usn_CV:N,usn_DD:k}},function(e,t,r){"use strict";var i=82,a=105,s=87,n=110,o=[112,117];e.exports={BB_Iowa:i,BB_QueenElizabeth:85,BB_Nelson:115,CV_Lexington:s,CVB_Lexington:a,CV_Essex:n,CV_ArkRoyal:101,CA_Furutaka:39,CA_Aoba:40,CL_Kuma:48,CL_Nagara:49,CL_Sendai:50,CL_Yuubari:51,CL_Agano:52,CL_Gotland:114,CLT_Kuma:54,CLV_Gotland:116,CT_Katori:55,DD_Kamikaze:84,DD_Special:[15,16,17],DD_Tokugata:[15,16,17],DD_Fubuki:15,DD_Ayanami:16,DD_Akatsuki:17,DD_Hatsuharu:18,DD_Shiratsuyu:19,DD_Shimakaze:24,DD_Akizuki:23,DD_J:107,DD_JohnCButler:112,group_DD_Tokugata:[15,16,17],group_DD_Navy_USN:o,AV_Nisshin:118,group_Navy_USN:[i,s,a,n].concat(o),group_Navy_RN:[85,115,101,107]}},function(e,t,r){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports=function(e){return"object"===(void 0===e?"undefined":i(e))&&e.id?e:isNaN(e)?void 0:KC.db.ships[parseInt(e)]}},function(e,t,r){"use strict";e.exports=r(10)},function(e,t,r){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports=function(e){return e&&"object"===(void 0===e?"undefined":i(e))&&e.id?e:isNaN(e)?void 0:(KC.db.equipments||KC.db.items||{})[parseInt(e)]}},function(e,t,r){"use strict";var i=r(2),a=r(6),s=a.ArrayOrItem,n=a.ArrayOrItemAll;e.exports=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0===(e=i(e)))return!1;for(var r in t)if(void 0!==t[r]&&!o[r.toLowerCase()](e,t[r]))return!1;return!0};var o={isid:function(e,t){return s(t,function(t){return!isNaN(t)&&parseInt(t)===e.id})},isnotid:function(e,t){return n(t,function(t){return!isNaN(t)&&parseInt(t)!==e.id})},isname:function(e,t){return s(t,function(t){return e.isName(t)})},isnotname:function(e,t){return n(t,function(t){return!e.isName(t)})},istype:function(e,t){return s(t,function(t){return!isNaN(t)&&parseInt(t)===e.type})},isnottype:function(e,t){return n(t,function(t){return!isNaN(t)&&parseInt(t)!==e.type})},isbattleship:function(e,t){return this.istype(e,[8,6,20,7,18])===t},isbb:function(e,t){return this.isbattleship(e,t)},iscarrier:function(e,t){return this.istype(e,[11,10,9,30,32])===t},iscv:function(e,t){return this.iscarrier(e,t)},issubmarine:function(e,t){return this.istype(e,[14,13])===t},isss:function(e,t){return this.issubmarine(e,t)},isclass:function(e,t){return s(t,function(t){return!isNaN(t)&&parseInt(t)===e.class})},isnotclass:function(e,t){return n(t,function(t){return!isNaN(t)&&parseInt(t)!==e.class})},hasslot:function(e,t){return!!Array.isArray(e.slot)&&(Array.isArray(t)?isNaN(t[0])&&!isNaN(t[1])?e.slot.length<=parseInt(t[1]):!isNaN(t[0])&&isNaN(t[1])?e.slot.length>=parseInt(t[0]):!isNaN(t[0])&&!isNaN(t[1])&&(e.slot.length>=parseInt(t[0])&&e.slot.length<=parseInt(t[1])):!isNaN(t)&&parseInt(t)===e.slot.length)},hasslotmin:function(e,t){return this.hasslot(e,[t,void 0])},hasslotmax:function(e,t){return this.hasslot(e,[void 0,t])},minlevel:function(e,t){return void 0===e.level||e.level>=t},canequip:function(e,t){return e.canEquip(t)}}},function(e,t,r){"use strict";var i=r(60),a=r(61);e.exports={ArrayOrItem:i,ArrayOrItemAll:a}},function(e,t,r){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=r(4),s=r(8),n=r(6),o=n.ArrayOrItem,u=n.ArrayOrItemAll,p={isid:function(e,t){return o(t,function(t){return!isNaN(t)&&parseInt(t)===e.id})},isnotid:function(e,t){return u(t,function(t){return!isNaN(t)&&parseInt(t)!==e.id})},isname:function(e,t){return o(t,function(t){return e.isName(t)})},isnotname:function(e,t){return u(t,function(t){return!e.isName(t)})},isnameof:function(e,t){return o(t,function(t){return e.hasName(t)})},isnotnameof:function(e,t){return u(t,function(t){return!e.hasName(t)})},istype:function(e,t,r){return o(t,function(t){if(isNaN(t))return!1;if(parseInt(t)!==e.type)return!1;if("object"===(void 0===r?"undefined":i(r))&&r.hasStat){var a=!0;for(var s in r.hasStat)Array.isArray(r.hasStat[s])?(e.stat[s]<r.hasStat[s][0]&&(a=!1),e.stat[s]>r.hasStat[s][1]&&(a=!1)):e.stat[s]<r.hasStat[s]&&(a=!1);if(!a)return!1}return!0})},isnottype:function(e,t){return u(t,function(t){return!isNaN(t)&&parseInt(t)!==e.type})},isaaradar:function(e,t){return(this.istype(e,s.Radars)&&!isNaN(e.stat.aa)&&e.stat.aa>=1)===t},issurfaceradar:function(e,t){return(this.istype(e,s.Radars)&&!isNaN(e.stat.hit)&&e.stat.hit>=3)===t}};e.exports=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if("object"===(void 0===r?"undefined":i(r)))return e(t,0,0,r);if("object"===(void 0===n?"undefined":i(n)))return e(t,r,0,n);if(void 0===(t=a(t)))return!1;for(var u in o)if(void 0!==o[u]){var l=u.toLowerCase();if(["improve","improvement","star"].includes(l))return(parseInt(r||0)||0)>=parseInt(o[u]);if(p[l]){if(!p[l](t,o[u]))return!1}else if("is"===u.substr(0,2)){var c=u.substr(2);if("HAMountAAFD"===c)c="HAMountsAAFD";else if(c+"s"in s)c+="s";else if(!(c in s))return!1;var f="object"===i(o[u])&&!Array.isArray(o[u]),h=o[u]&&f?o[u]:void 0;if(!p[!0===o[u]||f?"istype":"isnottype"](t,s[c],h))return!1}}return!0}},function(e,t,r){"use strict";var i={SmallCaliber:1,SmallCaliberHigh:2,SmallCaliberHA:2,SmallCaliberAA:3,SmallCaliberAAFD:3,MediumCaliber:4,LargeCaliber:5,SuperCaliber:6,SecondaryGun:7,SecondaryGunHigh:8,SecondaryGunHA:8,SecondaryGunAA:9,SecondaryGunAAFD:9,Type3Shell:10,APShell:11,Torpedo:12,SubmarineTorpedo:13,MidgetSubmarine:14,ReconSeaplane:15,ReconSeaplaneNight:16,SeaplaneBomber:17,CarrierFighter:18,TorpedoBomber:19,DiveBomber:20,CarrierRecon:21,Autogyro:22,AntiSubPatrol:23,SmallRadar:24,LargeRadar:25,DepthCharge:26,Sonar:27,LargeSonar:28,AAGun:29,AAGunConcentrated:30,AAGunCD:30,CDMG:30,AAFireDirector:31,AAFD:31,AviationPersonnel:36,SurfaceShipPersonnel:37,LandingCraft:38,Searchlight:39,SupplyContainer:41,CommandFacility:45,LargeFlyingBoat:45,SearchlightLarge:46,SuparRadar:47,CombatRation:48,CarrierRecon2:50,SeaplaneFighter:51,AmphibiousCraft:52,LandBasedAttacker:53,Interceptor:54,JetBomberFighter:55,JetBomberFighter2:56,TransportMaterial:57,SubmarineEquipment:58,LandBasedFighter:59,CarrierFighterNight:60,TorpedoBomberNight:61,LandBasedAntiSubPatrol:62,LandBasedRecon:63};i.MainGuns=[i.SmallCaliber,i.SmallCaliberHigh,i.SmallCaliberAA,i.MediumCaliber,i.LargeCaliber,i.SuperCaliber],i.MainCalibers=i.MainGuns,i.SmallCalibers=[i.SmallCaliber,i.SmallCaliberHigh,i.SmallCaliberAA],i.MediumCalibers=[i.MediumCaliber],i.LargeCalibers=[i.LargeCaliber,i.SuperCaliber],i.SecondaryGuns=[i.SecondaryGun,i.SecondaryGunHigh,i.SecondaryGunAA],i.HAMounts=[i.SmallCaliberHigh,i.SmallCaliberAA,i.SecondaryGunHigh,i.SecondaryGunAA],i.HAMountsAAFD=[i.SmallCaliberAA,i.SecondaryGunAA],i.APShells=[i.APShell],i.Torpedos=[i.Torpedo,i.SubmarineTorpedo],i.Seaplanes=[i.ReconSeaplane,i.ReconSeaplaneNight,i.SeaplaneBomber,i.SeaplaneFighter],i.Fighters=[i.SeaplaneBomber,i.CarrierFighter,i.CarrierFighterNight,i.TorpedoBomber,i.TorpedoBomberNight,i.DiveBomber,i.SeaplaneFighter,i.LandBasedAttacker,i.Interceptor,i.JetBomberFighter,i.JetBomberFighter2,i.LandBasedFighter],i.Interceptors=[i.Interceptor,i.LandBasedFighter],i.Recons=[i.ReconSeaplane,i.ReconSeaplaneNight,i.CarrierRecon,i.CarrierRecon2,i.LargeFlyingBoat,i.LandBasedRecon],i.SeaplaneRecons=[i.ReconSeaplane,i.ReconSeaplaneNight],i.SeaplaneReconsAll=[i.ReconSeaplane,i.ReconSeaplaneNight,i.LargeFlyingBoat],i.SeaplaneBombers=[i.SeaplaneBomber,i.SeaplaneFighter],i.SeaplaneFighters=[i.SeaplaneFighter],i.CarrierFighters=[i.CarrierFighter,i.CarrierFighterNight],i.CarrierRecons=[i.CarrierRecon,i.CarrierRecon2],i.CarrierBased=[i.CarrierFighter,i.CarrierFighterNight,i.TorpedoBomber,i.TorpedoBomberNight,i.DiveBomber,i.CarrierRecon,i.CarrierRecon2,i.JetBomberFighter,i.JetBomberFighter2],i.LandBased=[i.LandBasedAttacker,i.Interceptor,i.JetBomberFighter,i.JetBomberFighter2,i.LandBasedFighter,i.LandBasedAntiSubPatrol,i.LandBasedRecon],i.TorpedoBombers=[i.TorpedoBomber,i.TorpedoBomberNight],i.DiveBombers=[i.DiveBomber],i.JetBomberFighters=[i.JetBomberFighter,i.JetBomberFighter2],i.Jets=[i.JetBomberFighter,i.JetBomberFighter2],i.Autogyros=[i.Autogyro],i.AntiSubPatrols=[i.AntiSubPatrol,i.LandBasedAntiSubPatrol],i.Aircrafts=[],[].concat(i.Seaplanes).concat(i.Recons).concat(i.CarrierBased).concat(i.Autogyros).concat(i.AntiSubPatrols).concat(i.LandBased).forEach(function(e){i.Aircrafts.indexOf(e)<0&&i.Aircrafts.push(e)}),i.Radars=[i.SmallRadar,i.LargeRadar,i.SuparRadar],i.SmallRadars=[i.SmallRadar],i.LargeRadars=[i.LargeRadar,i.SuparRadar],i.AntiSubmarines=[i.DepthCharge,i.Sonar,i.LargeSonar],i.DepthCharges=[i.DepthCharge],i.Sonars=[i.Sonar,i.LargeSonar],i.AAGuns=[i.AAGun,i.AAGunConcentrated],i.AAFireDirectors=[i.AAFireDirector],i.AAFDs=i.AAFireDirectors,i.Searchlights=[i.Searchlight,i.SearchlightLarge],i.AviationPersonnels=[i.AviationPersonnel],i.SurfaceShipPersonnels=[i.SurfaceShipPersonnel],i.LandingCrafts=[i.LandingCraft,i.AmphibiousCraft],i.AmphibiousCrafts=[i.AmphibiousCraft],i.SupplyContainers=[i.SupplyContainer],i.CombatRations=[i.CombatRation],e.exports=i},function(e,t,r){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}();function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}window.KC=function(){var e=r(3),t=r(58),u=r(5),p=r(7),l=r(2),c=r(63),f=r(64),h=r(8),m={lang:"zh_cn",joint:"・",maxShipLv:175,maxHqLv:120,db:{},path:{db:"/kcdb/",pics:{ships:"/kcpic/ships/"}},statSpeed:{5:"低速",10:"高速",15:"高速+",20:"最速"},getStatSpeed:function(e){return this.statSpeed[parseInt(e)]},statRange:{1:"短",2:"中",3:"长",4:"超长"},getStatRange:function(e){return this.statRange[parseInt(e)]},getFolderGroup:function(e,t){if("undefined"!=typeof node&&node&&node.path){e="/"==e.substr(e.length-1)?e.substr(0,e-1):e,t=parseInt(t);for(var r=1;50*r<t;)r++;return e+"-"+r+"/"}return e},textRank:{1:"|",2:"||",3:"|||",4:"\\",5:"\\\\",6:"\\\\\\",7:"》"},check:{ship:u,equipment:p},planesPerSlotLBAS:{recon:4,attacker:18}},d=function(){function e(t){for(var r in o(this,e),t)this[r]=t[r]}return a(e,[{key:"getName",value:function(e){return e=e||m.lang,this.name?this.name[e]||this.name:null}},{key:"isName",value:function(e,t){if(!0===t&&(t=m.lang),t)return this.name[t]===e;for(var r in this.name)if("suffix"!==r&&this.name[r]===e)return!0;return!1}},{key:"hasName",value:function(e,t){if(!0===t&&(t=m.lang),t)return!!this.name[t].includes(e);for(var r in this.name)if("suffix"!==r&&this.name[r].includes(e))return!0;return!1}},{key:"isNameOf",value:function(){return this.hasName.apply(this,arguments)}},{key:"_name",get:function(){return this.getName()}}]),e}(),b=function(e){function t(e){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return n(t,e),t}(d),y=function(t){function r(e){o(this,r);var t=s(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return Object.defineProperty(t,"rankupgradable",{value:t.isRankUpgradable()}),t}return n(r,t),a(r,[{key:"getName",value:function(e,t){t=t||m.lang;var r=d.prototype.getName.call(this,t),i=e&&1==!e?e:"small";return e?r.replace(/（([^（^）]+)）/g,"<"+i+">($1)</"+i+">"):r}},{key:"getType",value:function(e){return e=e||m.lang,this.type?m.db.item_types[this.type].name[e]:null}},{key:"getIconId",value:function(){return Array.isArray(this.type_ingame)&&this.type_ingame.length>3?this.type_ingame[3]:m.db.item_types[this.type].icon}},{key:"getCaliber",value:function(){var e=this.getName(!1,"ja_jp"),t=parseFloat(e);return t}},{key:"getPower",value:function(){return this.stat[m.db.item_types[this.type].main_attribute||"fire"]}},{key:"isEquipableExSlot",value:function(){return this.equipable_exslot?this.equipable_exslot||!1:this.type&&m.db.item_types[this.type].equipable_exslot||!1}},{key:"isRankUpgradable",value:function(){return D.equipmentType.Aircrafts.includes(this.type)&&this.type!==D.equipmentType.Autogyro&&this.type!==D.equipmentType.AntiSubPatrol}},{key:"getStat",value:function(e,t){e=e.toLowerCase();var r=this.stat[e];if(!t||void 0===r||!Array.isArray(this.stat_bonus))return r;if(t&&Array.isArray(this.stat_bonus)){"object"!==(void 0===t?"undefined":i(t))&&(t=m.db.ships[t]);var a=t.id,s=void 0;if(this.stat_bonus.forEach(function(e){Array.isArray(e.ships)&&e.ships.some(function(t){if(t==a){for(var r in e.bonus)s||(s={}),s[r]=Math.max(e.bonus[r],s[r]||0);return!0}return!1}),Array.isArray(e.ship_classes)&&e.ship_classes.some(function(r){if(r==t.class){for(var i in e.bonus)s||(s={}),s[i]=Math.max(e.bonus[i],s[i]||0);return!0}return!1})}),s)return r+(s[e]||0)}return r}},{key:"getBonuses",value:function(){var t=this;return e.filter(function(e){if(e.equipment==t.id)return!0;if(void 0!==e.equipments&&"object"===i(e.ship)){if(Array.isArray(e.ship.isID)&&!e.ship.isID.every(function(e){return l(e).canEquip(t,!0)}))return!1;if("number"==typeof e.ship.isID&&!l(e.ship.isID).canEquip(t,!0))return!1;if(Array.isArray(e.ship.isType)&&!e.ship.isType.every(function(e){return f(e).equipable.includes(t.type)}))return!1;if("number"==typeof e.ship.isType&&!f(e.ship.isType).equipable.includes(t.type))return!1;if(Array.isArray(e.ship.isClass)&&!e.ship.isClass.every(function(e){return f(c(e).ship_type_id).equipable.includes(t.type)}))return!1;if("number"==typeof e.ship.isClass&&!f(c(e.ship.isClass).ship_type_id).equipable.includes(t.type))return!1}return Array.isArray(e.equipments)?e.equipments.some(function(e){return p(t,10,7,e)}):"object"===i(e.equipments)&&Object.keys(e.equipments).filter(function(e){return/^has/.test(e)}).some(function(r){return p(t,function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}({},r.replace(/^has/,"is"),e.equipments[r]))})})}},{key:"_icon",get:function(){return"assets/images/itemicon/"+this.getIconId()+".png"}}]),r}(d),g=function(t){function r(e){return o(this,r),s(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e))}return n(r,t),a(r,[{key:"getName",value:function(e,t){e=e||"",t=t||m.lang;var r=this.getSuffix(t);return(this.name[t]||this.name.ja_jp)+(r?(!0===e?m.joint:e)+r:"")}},{key:"getNameNoSuffix",value:function(e){return e=e||m.lang,this.name[e]||this.name.ja_jp}},{key:"getSuffix",value:function(e){return e=e||m.lang,this.name.suffix&&(m.db.ship_namesuffix[this.name.suffix][e]||m.db.ship_namesuffix[this.name.suffix].ja_jp)||""}},{key:"getType",value:function(e){return e=e||m.lang,this.type?m.db.ship_types[this.type].name[e]||m.db.ship_types[this.type].name.ja_jp||"":null}},{key:"getSeriesData",value:function(){return this.series?m.db.ship_series[this.series].ships:[{id:this.id}]}},{key:"getPic",value:function(e,t){e=parseInt(e||0);for(var r=this.getSeriesData(),i=this.illust_version?"?version="+this.illust_version:"",a=function(e,r){return"undefined"!=typeof node&&node&&node.path&&m.path.pics.ships?node.path.join(m.getFolderGroup(m.path.pics.ships,e),e+"/"+r+"."+(t||"webp")):m.path.pics.ships?m.path.pics.ships+e+"/"+r+"."+(t||"png")+i:"/"+e+"/"+r+"."+(t||"png")+i},s=0;s<r.length;s++)if(r[s].id==this.id)switch(e){case 0:case 1:case 2:case 3:case 12:case 13:case 14:return a(this.id,e);default:return r[s].illust_delete?a(r[s-1].id,e):a(this.id,e)}}},{key:"getSpeed",value:function(){return m.statSpeed[parseInt(this.stat.speed)]}},{key:"getSpeedRule",value:function(){return this.speed_rule?this.speed_rule:this.class?m.db.ship_classes[this.class].speed_rule:null}},{key:"getRange",value:function(){return m.statRange[parseInt(this.stat.range)]}},{key:"getEquipmentTypes",value:function(e){var t=this.additional_disable_item_types||[],r=m.db.ship_types[this.type],i=r.equipable.concat(this.additional_item_types||[]);return Array.isArray(r.additional_item_types_by_slot)&&("number"==typeof e?Array.isArray(r.additional_item_types_by_slot[e])&&r.additional_item_types_by_slot[e].forEach(function(e){return i.push(e)}):!0===e&&r.additional_item_types_by_slot.forEach(function(e){e.forEach(function(e){return i.push(e)})})),i.filter(function(e){return t.indexOf(e)<0}).sort(function(e,t){return e-t})}},{key:"getAttribute",value:function(e,t){(t=t||1)>r.lvlMax&&(t=r.lvlMax);var i=void 0;switch(e){case"hp":return i=this.stat.hp,t>99&&(i=this.stat.hp>=90?this.stat.hp+9:this.stat.hp>=70?this.stat.hp+8:this.stat.hp>=50?this.stat.hp+7:this.stat.hp>=40?this.stat.hp+6:this.stat.hp>=30?this.stat.hp+5:this.stat.hp+4)>this.stat.hp_max&&(i=this.stat.hp_max),i;case"speed":return m.getStatSpeed(this.stat.speed);case"range":return m.getStatRange(this.stat.range);case"luck":return t>99?this.stat.luck+3:this.stat.luck;case"fuel":case"ammo":return t>99?Math.floor(.85*this.consum[e]):this.consum[e];case"aa":case"armor":case"fire":case"torpedo":return this.stat[e+"_max"]||this.stat[e];default:return function(e,t,r){return e=e||1,t=parseFloat(t),r=parseFloat(r)||t,t<0||r<0?-1:t==r?r:Math.floor(t+(r-t)*e/99)}(t,this.stat[e],this.stat[e+"_max"])}}},{key:"getRel",value:function(e){if(e){if(!this.rels[e]&&this.remodel&&this.remodel.prev)for(var t=m.db.ships[this.remodel.prev];t;){if(t.rels&&t.rels[e])return t.rels[e];t=t.remodel&&t.remodel.prev?m.db.ships[t.remodel.prev]:null}return this.rels[e]}return this.rels}},{key:"getCV",value:function(e){var t=this.getRel("cv");if(t)return m.db.entities[t].getName(e||m.lang)}},{key:"getIllustrator",value:function(e){var t=this.getRel("illustrator");if(t)return m.db.entities[t].getName(e||m.lang)}},{key:"getMinLv",value:function(){var e=this,t=this._series,r=void 0;return t.some(function(i,a){return e.id==i.id&&(r=a?t[a-1].next_lvl:1),r}),r}},{key:"getNavy",value:function(){return this.navy?this.navy:this.class&&m.db.ship_classes[this.class].navy||"ijn"}},{key:"getCapability",value:function(e){return e?this.capabilities?this.capabilities[e]:void 0:this.capabilities||{}}},{key:"getStatExtraMax",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;switch(e.toLowerCase()){case"hp":var r=this.getAttribute(e,t),i=this.stat.hp_max;return Math.max(0,Math.min(2,i-r));case"asw":return this.stat.asw?9:!!D.shipType.LightCruisers.concat(D.shipType.Destroyers).includes(this.type)&&9;default:return!1}}},{key:"canEquip",value:function(e,t){var r=this;if(Array.isArray(e))return e.every(function(e){return r.canEquip(e,t)});if("string"==typeof e){if(Array.isArray(h[e]))return h[e].some(function(e){return r.canEquip(e,t)});if("number"==typeof h[e])return this.canEquip(h[e],t);if(Array.isArray(h[e+"s"]))return h[e+"s"].some(function(e){return r.canEquip(e,t)})}return"object"===(void 0===e?"undefined":i(e))&&void 0!==e.type&&(e=e.type),!isNaN(e)&&this.getEquipmentTypes(t).includes(parseInt(e))}},{key:"getBonuses",value:function(){var t=this;return e.filter(function(e){return u(t,e.ship)})}},{key:"_type",get:function(){return this.getType()}},{key:"_series",get:function(){return this.getSeriesData()}},{key:"_pics",get:function(){for(var e=[],t=0;t<15;t++)e.push(this.getPic(t));return e}},{key:"_speed",get:function(){return this.getSpeed()}},{key:"_speedRule",get:function(){return this.getSpeedRule()}},{key:"_range",get:function(){return this.getRange()}},{key:"_cv",get:function(){return this.getCV()}},{key:"_illustrator",get:function(){return this.getIllustrator()}},{key:"_minLv",get:function(){return this.getMinLv()}},{key:"_navy",get:function(){return this.getNavy()}}]),r}(d);g.lvlMax=m.maxShipLv;var v=function(e){function t(e){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return n(t,e),t}(d);m.dbLoad=function(e){return"string"==typeof e?m.dbLoad({type:e}):e.type||e.url?$.ajax({url:e.url||m.path.db+"/"+e.type+".json",dataType:"text",success:function(t){var r=[];e.beforeProcess&&(r=e.beforeProcess(t)),void 0===m.db[e.type]&&(m.db[e.type]={}),r.forEach(function(t){if(t){var r=JSON.parse(t);switch(e.type){case"ships":m.db[e.type][r.id]=new g(r);break;case"items":m.db[e.type][r.id]=new y(r);break;case"entities":m.db[e.type][r.id]=new b(r);break;default:m.db[e.type][r.id]=r}}}),e.success&&e.success(t)},complete:function(t,r){e.complete&&e.complete(t,r)}}):null};var S=function(e){return e instanceof g?e:m.db.ships?m.db.ships[e]:{}},_=function(e){return e instanceof y?e:m.db.equipments?m.db.equipments[e]:m.db.items[e]},C=function(e){var t=[];return e.forEach(function(e,r){t[r>=4?r+1:r]=e}),t[4]=0,t},D={equipmentType:h,shipType:{Carriers:[9,10,11,30,32],LightCruisers:[2,3,21,28],Destroyers:[1,19],Submarines:[13,14]},calcByShip:{},calcByFleet:{},calcByField:{},calc:{}},A=D.equipmentType;return A.isInterceptor=function(e){return(!(e=_(e)).type_ingame||47!=e.type_ingame[2])&&A.Interceptors.indexOf(e.type)>-1},D.starMultiper={SmallCalibers:{shelling:1,night:1},MediumCalibers:{shelling:1,night:1},LargeCalibers:{shelling:1.5,night:1},SecondaryGuns:{shelling:1,night:1,hit:1},APShells:{shelling:1,night:1},AAFireDirectors:{shelling:1,night:1},Searchlights:{shelling:1,night:1},AAGuns:{shelling:1,torpedo:1.2},Torpedos:{torpedo:1.2,night:1},DepthCharges:{shelling:.75,antisub:1},Sonars:{shelling:.75,antisub:1},SmallRadars:{los:1.25},LargeRadars:{los:1.4},Seaplanes:{},ReconSeaplanes:{los:1.2},SeaplaneFighters:{fighter:.2},SeaplaneBomber:{los:1.15},CarrierFighters:{fighter:.2},DiveBombers:{fighter:.25,night:1},CarrierRecons:{los:1.2},LandingCrafts:{shelling:1,night:1},Interceptors:{fighter:.2},_10:{shelling:["multiplication",.2],night:1},_66:{shelling:["multiplication",.2],night:1},_220:{shelling:["multiplication",.2],night:1},_275:{shelling:["multiplication",.2],night:1},_12:{shelling:["multiplication",.3],night:["multiplication",.3]},_234:{shelling:["multiplication",.3],night:["multiplication",.3]}},D.getStarMultiplier=function(e,t){if(!D.starMultiper._init){var r=function(e){A[e]&&A[e].forEach?A[e].forEach(function(t){D.starMultiper[t]=D.starMultiper[e]}):"number"==typeof A[e]&&(D.starMultiper[A[e]]=D.starMultiper[e])};for(var i in D.starMultiper)r(i);D.starMultiper._init=!0}var a=D.starMultiper[e]||{};return t?a[t]||0:a},D.getStarBonus=function(e,t,r){e=_(e);var i=Object.assign({},D.getStarMultiplier(e.type),D.starMultiper["_"+e.id])[t],a=void 0===i?0:i,s="sqrt";switch(Array.isArray(a)&&(s=a[0],a=a[1]),s){case"sqrt":return a*Math.sqrt(r);case"multiplication":case"multiple":return a*r}},D.getFighterPowerRankMultiper=function(e,t){e=_(e);var r=[],i={};r[0]=[0,9],r[1]=[10,24],r[2]=[25,39],r[3]=[40,54],r[4]=[55,69],r[5]=[70,84],r[6]=[85,99],r[7]=[100,120],i.CarrierFighter=[0,0,2,5,9,14,14,22],i.SeaplaneBomber=[0,0,1,1,1,3,3,6];var a=r[t],s=0;switch(e.type){case A.CarrierFighter:case A.CarrierFighterNight:case A.Interceptor:case A.SeaplaneFighter:case A.LandBasedFighter:s=i.CarrierFighter[t];break;case A.SeaplaneBomber:s=i.SeaplaneBomber[t]}return{min:Math.sqrt(a[0]/10)+s,max:Math.sqrt(a[1]/10)+s}},D.calculate=function(e,r,i,a,s,n){if(!e||!r)return 0;r instanceof g||(r=m.db.ships[r]);var o=0,u={main:0,secondary:0,torpedo:0,torpedoLateModel:0,seaplane:0,apshell:0,radar:0,radarAA:0,radarSurface:0,submarineEquipment:0,carrierFighterNight:0,torpedoBomberNight:0,aviationPersonnelNight:0,surfaceShipPersonnel:0},p=C(r.slot),l=0;i=i.map(function(e){return e?e instanceof y?e:m.db.equipments?m.db.equipments[e]:m.db.items[e]:null})||[],a=a||[],s=s||[],n=n||{},i.forEach(function(e){e&&(A.MainGuns.indexOf(e.type)>-1?u.main+=1:A.SecondaryGuns.indexOf(e.type)>-1?u.secondary+=1:A.Torpedos.indexOf(e.type)>-1?(u.torpedo+=1,e.name.ja_jp.indexOf("後期型")>-1&&(u.torpedoLateModel+=1)):A.Seaplanes.indexOf(e.type)>-1?u.seaplane+=1:A.APShells.indexOf(e.type)>-1?u.apshell+=1:A.Radars.indexOf(e.type)>-1?(u.radar+=1,e.stat.aa&&(u.radarAA+=1),e.stat.hit&&e.stat.hit>=3&&(u.radarSurface+=1)):A.SubmarineEquipment==e.type?u.submarineEquipment+=1:A.AviationPersonnels.indexOf(e.type)>-1?e.name.ja_jp.indexOf("夜間")>-1&&(u.aviationPersonnelNight+=1):A.SurfaceShipPersonnels.indexOf(e.type)>-1&&(u.surfaceShipPersonnel+=1),e.type_ingame&&(45===e.type_ingame[3]?u.carrierFighterNight+=1:46===e.type_ingame[3]&&(u.torpedoBomberNight+=1)))});var c=t(r,i,a,s);switch(e){case"fighterPower":return l=0,p.map(function(e,t){if(i[t]&&A.Fighters.indexOf(i[t].type)>-1&&e){if(l=Math.sqrt(e)*(i[t].getStat("aa",r)||0),A.CarrierFighters.includes(i[t].type))switch(s[t]){case 1:case"1":l+=1;break;case 2:case"2":l+=4;break;case 3:case"3":l+=6;break;case 4:case"4":l+=11;break;case 5:case"5":l+=16;break;case 6:case"6":l+=17;break;case 7:case"7":l+=25}else if(-1==A.Recons.indexOf(i[t].type)){var a=i[t].type==A.SeaplaneBomber?9:3;l+=1==s[t]?1:a/6*(s[t]-1)}o+=Math.floor(l)}}),o;case"fighterPower_v2":return D.calcByShip.fighterPower_v2(r,i,a,s);case"shelling":case"shellingDamage":return D.shipType.Submarines.indexOf(r.type)>-1?"-":(o=D.calcByShip.shellingPower(r,i,a,s,{},c))&&o>-1?Math.floor(o):"-";case"torpedo":case"torpedoDamage":return(o=function(e){return D.calcByShip.torpedoPower(r,i,a,s,e,c)}())&&o>-1?Math.floor(o):"-";case"nightBattle":var f=D.calcByShip.nightPower(r,i,a,s,{},u,c);return f.damage<=0?"-":f.value;case"addHit":return p.map(function(e,t){i[t]&&(o+=i[t].getStat("hit",r)||0)}),(o+=c.hit||0)>=0?"+"+o:o;case"addArmor":return p.map(function(e,t){i[t]&&(o+=i[t].getStat("armor",r)||0)}),o+(c.armor||0);case"addEvasion":return p.map(function(e,t){i[t]&&(o+=i[t].getStat("evasion",r)||0)}),o+(c.evasion||0);case"losPower":return D.calcByShip.losPower(r,i,a,s,n);default:return D.calcByShip[e](r,i,a,s,n,c)}},D.shellingDamage=function(e,t,r,i){return this.calculate("shellingDamage",e,t,r,i)},D.torpedoDamage=function(e,t,r,i){return this.calculate("torpedoDamage",e,t,r,i)},D.fighterPower=function(e,t,r,i){return this.calculate("fighterPower",e,t,r,i)},D.fighterPower_v2=function(e,t,r,i){return this.calculate("fighterPower_v2",e,t,r,i)},D.nightBattle=function(e,t,r,i){return this.calculate("nightBattle",e,t,r,i)},D.addHit=function(e,t,r,i){return this.calculate("addHit",e,t,r,i)},D.addArmor=function(e,t,r,i){return this.calculate("addArmor",e,t,r,i)},D.addEvasion=function(e,t,r,i){return this.calculate("addEvasion",e,t,r,i)},D.losPower=function(e,t,r,i,a){return this.calculate("losPower",e,t,r,i,a)},D.calc.losPower=function(e){var t=["(Intercept)","DiveBombers","TorpedoBombers","CarrierRecons","SeaplaneRecons","SeaplaneBombers","SmallRadars","LargeRadars","Searchlights","statLos","hqLv"],r={"(Intercept)":0,DiveBombers:1.03745043134563,TorpedoBombers:1.3679056374142,CarrierRecons:1.65940512636315,SeaplaneRecons:2,SeaplaneBombers:1.77886368594467,SmallRadars:1.0045778494921,LargeRadars:.990738063979571,Searchlights:.906965144360512,statLos:1.6841895400986,hqLv:-.614246711531445},i={"(Intercept)":4.66445565766347,DiveBombers:.0965028505325845,TorpedoBombers:.108636184978525,CarrierRecons:.0976055279516298,SeaplaneRecons:.0866229392463539,SeaplaneBombers:.0917722496848294,SmallRadars:.0492773648320346,LargeRadars:.0491221486053861,Searchlights:.0658283797225724,statLos:.0781594211213618,hqLv:.0369222352426548},a={"(Intercept)":{"(Intercept)":1,DiveBombers:-.147020064768061,TorpedoBombers:-.379236131621529,CarrierRecons:-.572858669501918,SeaplaneRecons:-.733913857017495,SeaplaneBombers:-.642621825152428,SmallRadars:-.674829588068364,LargeRadars:-.707418111752863,Searchlights:-.502304601556193,statLos:-.737374218573832,hqLv:-.05071933950163},DiveBombers:{"(Intercept)":-.147020064768061,DiveBombers:1,TorpedoBombers:.288506347076736,CarrierRecons:.365820372770994,SeaplaneRecons:.425744409856409,SeaplaneBombers:.417783698791503,SmallRadars:.409046013184429,LargeRadars:.413855653833994,Searchlights:.308730607324667,statLos:.317984916914851,hqLv:-.386740224500626},TorpedoBombers:{"(Intercept)":-.379236131621529,DiveBombers:.288506347076736,TorpedoBombers:1,CarrierRecons:.482215071254241,SeaplaneRecons:.584455876852325,SeaplaneBombers:.558515133495825,SmallRadars:.547260012897553,LargeRadars:.560437619378443,Searchlights:.437934879351188,statLos:.533934507932748,hqLv:-.405349979885748},CarrierRecons:{"(Intercept)":-.572858669501918,DiveBombers:.365820372770994,TorpedoBombers:.482215071254241,CarrierRecons:1,SeaplaneRecons:.804494553748065,SeaplaneBombers:.75671307047535,SmallRadars:.748420581669228,LargeRadars:.767980338133817,Searchlights:.589651513349878,statLos:.743851348255527,hqLv:-.503544281376776},SeaplaneRecons:{"(Intercept)":-.733913857017495,DiveBombers:.425744409856409,TorpedoBombers:.584455876852325,CarrierRecons:.804494553748065,SeaplaneRecons:1,SeaplaneBombers:.932444440578382,SmallRadars:.923988080549326,LargeRadars:.94904944359066,Searchlights:.727912987329348,statLos:.944434077970518,hqLv:-.614921413821462},SeaplaneBombers:{"(Intercept)":-.642621825152428,DiveBombers:.417783698791503,TorpedoBombers:.558515133495825,CarrierRecons:.75671307047535,SeaplaneRecons:.932444440578382,SeaplaneBombers:1,SmallRadars:.864289865445084,LargeRadars:.886872388674911,Searchlights:.68310647756898,statLos:.88122333327317,hqLv:-.624797255805045},SmallRadars:{"(Intercept)":-.674829588068364,DiveBombers:.409046013184429,TorpedoBombers:.547260012897553,CarrierRecons:.748420581669228,SeaplaneRecons:.923988080549326,SeaplaneBombers:.864289865445084,SmallRadars:1,LargeRadars:.872011318623459,Searchlights:.671926570242336,statLos:.857213501657084,hqLv:-.560018086758868},LargeRadars:{"(Intercept)":-.707418111752863,DiveBombers:.413855653833994,TorpedoBombers:.560437619378443,CarrierRecons:.767980338133817,SeaplaneRecons:.94904944359066,SeaplaneBombers:.886872388674911,SmallRadars:.872011318623459,LargeRadars:1,Searchlights:.690102027588321,statLos:.883771367337743,hqLv:-.561336967269448},Searchlights:{"(Intercept)":-.502304601556193,DiveBombers:.308730607324667,TorpedoBombers:.437934879351188,CarrierRecons:.589651513349878,SeaplaneRecons:.727912987329348,SeaplaneBombers:.68310647756898,SmallRadars:.671926570242336,LargeRadars:.690102027588321,Searchlights:1,statLos:.723228553177704,hqLv:-.518427865593732},statLos:{"(Intercept)":-.737374218573832,DiveBombers:.317984916914851,TorpedoBombers:.533934507932748,CarrierRecons:.743851348255527,SeaplaneRecons:.944434077970518,SeaplaneBombers:.88122333327317,SmallRadars:.857213501657084,LargeRadars:.883771367337743,Searchlights:.723228553177704,statLos:1,hqLv:-.620804120587684},hqLv:{"(Intercept)":-.05071933950163,DiveBombers:-.386740224500626,TorpedoBombers:-.405349979885748,CarrierRecons:-.503544281376776,SeaplaneRecons:-.614921413821462,SeaplaneBombers:-.624797255805045,SmallRadars:-.560018086758868,LargeRadars:-.561336967269448,Searchlights:-.518427865593732,statLos:-.620804120587684,hqLv:1}},s={DiveBombers:0,TorpedoBombers:0,CarrierRecons:0,SeaplaneRecons:0,SeaplaneBombers:0,SmallRadars:0,LargeRadars:0,Searchlights:0,statLos:1,hqLv:1};for(var n in e)s[n]=e[n];return function(e){void 0===e["(Intercept)"]&&(e["(Intercept)"]=1),e.hqLv=5*Math.ceil(e.hqLv/5);var s={},n=0,o={},u=0;return t.forEach(function(t){var a=e[t]*r[t];s[t]=a,n+=a,o[t]=e[t]*i[t]}),t.forEach(function(e){t.forEach(function(t){u+=o[e]*o[t]*a[e][t]})}),{x_estimate:s,y_estimate:n,x_std_error:o,y_std_error:u}}(s)},D.calc.los33=function(e){if(e){var t=0,r=0,i={TorpedoBombers:.8,CarrierRecons:1,ReconSeaplane:1.2,ReconSeaplaneNight:1.2,SeaplaneBomber:1.1};return Object.defineProperty(i,"default",{value:.6,enumerable:!1,configurable:!1,writable:!1}),e.equipments.forEach(function(e){if(e.id){var r=_(e.id);if(r.stat.los){var a=i.default,s=e.star||0;for(var n in i)(Array.isArray(A[n])?A[n]:[A[n]]).indexOf(r.type)>-1&&(a=i[n]);t+=a*(r.stat.los+D.getStarBonus(r,"los",s))}}}),e.ships.forEach(function(e){var t=S(e.id),i=t.getAttribute("los",Math.max(e.lv||1,t.getMinLv()));r+=Math.sqrt(Math.max(i,1))}),t+r-Math.ceil(.4*e.hq)+2*(6-e.ships.length)}},D.calc.TP=function(e){var t=0,r=(e=e||{}).ship||{},i=e.equipment||{};for(var a in r){var s=0;switch(a){case 1:case"1":case 19:case"19":case"dd":s=5;break;case 2:case"2":case 28:case"28":case"cl":s=2;break;case 21:case"21":case"ct":s=6;break;case 5:case"5":case"cav":s=4;break;case 8:case"8":case"bbv":s=7;break;case 12:case"12":case 24:case"24":case"av":s=9.5;break;case 14:case"14":case"ssv":s=1;break;case 15:case"15":case"lha":s=12;break;case 29:case"29":case"ao":s=15;break;case 17:case"17":case"as":s=7}t+=s*(parseInt(r[a])||0)}for(var n in i){var o=0,u=parseInt(n),p=void 0;switch(u){case 145:case 150:o=1;break;case 75:o=5;break;case 68:case 193:case 166:o=8;break;case 167:o=2;break;default:switch((p=_(u)).type){case D.equipmentType.LandingCraft:p.name.ja_jp.indexOf("大発動艇")>-1&&(o=8)}}t+=o*(parseInt(i[n])||0)}return t},D.calc.fighterPower=function(e,t,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(!e)return[0,0];e=e instanceof y?e:m.db.equipments?m.db.equipments[e]:m.db.items[e],t=t||0,r=r||0,i=i||0;var s=a.isFromField,n=[0,0];if(t&&(void 0!==s&&s||A.Fighters.indexOf(e.type)>-1)){var o=((e.stat.aa||0)+(A.isInterceptor(e)?1.5*e.stat.evasion:0)+i*D.getStarMultiplier(e.type,"fighter"))*Math.sqrt(t),u=D.getFighterPowerRankMultiper(e,r),p=u.min,l=u.max;n[0]+=Math.floor(o+p),n[1]+=Math.floor(o+l)}return n},D.calc.fighterPowerAA=function(e,t,r,i){if(!e)return[0,0];e=_(e),t=t||0,r=r||0,i=i||0;var a=[0,0];if(t){var s=((e.stat.aa||0)+(A.isInterceptor(e)?e.stat.evasion:0)+(A.isInterceptor(e)?2*e.stat.hit:0)+i*D.getStarMultiplier(e.type,"fighter"))*Math.sqrt(t),n=D.getFighterPowerRankMultiper(e,r,{isAA:!0});a[0]+=Math.floor(s+n.min),a[1]+=Math.floor(s+n.max)}return a},D.calcByShip.shellingPower=function(e,r,i,a,s,n){s=s||{},n=n||t(e,r,i,a);var o=0,u=!1,p=C(e.slot);if(D.shipType.Carriers.indexOf(e.type)>-1?u=!0:[33].includes(e.type)||r.some(function(e){if(e&&!u&&A.CarrierBased.indexOf(e.type)>-1)return u=!0,!0}),u&&!s.isNight){var l=0,c=0;return p.map(function(t,a){if(r[a]){var s=r[a];o+=1.5*s.getStat("fire",e)||0,A.TorpedoBombers.indexOf(s.type)>-1&&(l+=s.getStat("torpedo",e)||0),c+=s.getStat("bomb",e)||0,A.SecondaryGuns.indexOf(s.type)>-1&&(o+=Math.sqrt(1.5*(i[a]||0)))}}),l||c?o+=Math.floor(1.5*(Math.floor(1.3*c)+l+e.stat.fire_max+(n.fire||0)))+50:-1}o=e.stat.fire_max||0;var f={CLMainGunNaval:0,CLMainGunTwin:0,ItalianCAMainGun:0};p.map(function(t,a){if(r[a]){var n=r[a];o+=n.getStat("fire",e)||0,D.shipType.LightCruisers.indexOf(e.type)>-1&&!n.name.ja_jp.includes("Bofors")&&(["14cm単装砲","15.2cm単装砲"].forEach(function(e){n.name.ja_jp.includes(e)&&(f.CLMainGunNaval+=1)}),["14cm連装砲","15.2cm連装砲"].forEach(function(e){n.name.ja_jp.includes(e)&&(f.CLMainGunTwin+=1)})),"rm"===e._navy&&n.name.ja_jp.includes("203mm/53")&&(f.ItalianCAMainGun+=1),i[a]&&!s.isNight&&(o+=D.getStarBonus(n,"shelling",i[a]))}});var h=0+2*Math.sqrt(f.CLMainGunTwin)+Math.sqrt(f.CLMainGunNaval)+Math.sqrt(f.ItalianCAMainGun)+(n.fire||0);return o+h},D.calcByShip.torpedoPower=function(e,r,i,a,s,n){s=s||{},n=n||t(e,r,i,a);var o=0,u=C(e.slot);return D.shipType.Carriers.indexOf(e.type)>-1&&!s.isNight?s.returnZero?0:-1:(o=(e.stat.torpedo_max||0)+(n.torpedo||0),u.map(function(t,a){if(r[a]){var n=r[a];o+=A.TorpedoBombers.indexOf(n.type)>-1&&!s.isNight?0:n.getStat("torpedo",e)||0,i[a]&&!s.isNight&&(o+=D.getStarBonus(n,"torpedo",i[a]))}}),o)},D.calcByShip.nightPower=function(e,r,i,a,s,n,o){s=s||{},o=o||t(e,r,i,a);var u={damage:0},p=0,l=C(e.slot);if((n.aviationPersonnelNight||e.getCapability("count_as_night_operation_aviation_personnel"))&&(n.carrierFighterNight>=1||n.torpedoBomberNight>=1)){l.forEach(function(e,t){r[t]&&i[t]&&(p+=D.getStarBonus(r[t],"night",i[t]))});var c=0,f=0,h=0,m=0,d=0,b=[],y=0,g=0;l.forEach(function(t,a){if(r[a]){var s=r[a],n=!1,o=!1;s.type_ingame&&(45===s.type_ingame[3]?(o=!0,n=!0):46===s.type_ingame[3]&&(o=!0,n=!0)),A.TorpedoBombers.indexOf(s.type)>-1?s.hasName("Swordfish","ja_jp")&&(o=!0,y++):A.DiveBombers.indexOf(s.type)>-1&&s.hasName("岩井","ja_jp")&&(o=!0,g++),n&&(c+=t),o&&(f+=s.getStat("fire",e),h+=s.getStat("torpedo",e),m+=Math.sqrt(t)*((3+1.5*(n?1:0))*(s.getStat("fire",e)+s.getStat("torpedo",e)+s.getStat("bomb",e)+s.getStat("asw",e))/10),i[a]&&(d+=D.getStarBonus(r[a],"night",i[a])))}});var v=y+g;n.carrierFighterNight>=2&&n.torpedoBomberNight>=1&&b.push(1.25),n.carrierFighterNight>=1&&n.torpedoBomberNight>=1&&b.push(1.2),(n.carrierFighterNight>=3||n.carrierFighterNight>=2&&v>=1||n.carrierFighterNight>=1&&n.torpedoBomberNight>=1&&v>=1||n.carrierFighterNight>=1&&n.torpedoBomberNight>=2||n.carrierFighterNight>=1&&v>=2)&&b.push(1.18),u.type="航空",u.hit=1,u.damage=Math.floor(e.stat.fire_max+(o.fire||0)+f+h+3*c+m+d),u.isMax=!0,b.length&&(u.cis=b.map(function(e){return[Math.floor(u.damage*e),1]}))}else if(e.getCapability("participate_night_battle_when_equip_swordfish"))u.damage+=e.stat.fire_max+(o.fire||0)+e.stat.torpedo_max+(o.torpedo||0),l.forEach(function(t,i){var a=r[i];r[i]&&A.TorpedoBombers.indexOf(a.type)>-1&&a.name.ja_jp.indexOf("Swordfish")>-1&&(u.damage+=a.getStat("fire",e)+a.getStat("torpedo",e))}),u.type="通常",u.damage=Math.floor(u.damage),u.hit=1;else{if(e.stat.fire+e.stat.torpedo<=0)return{damage:0};var S={};l.forEach(function(e,t){if(r[t]&&(i[t]&&(p+=D.getStarBonus(r[t],"night",i[t])),r[t])){var a=r[t];S[a.id]?S[a.id]++:S[a.id]=1}}),u.damage=D.calcByShip.shellingPower(e,r,i,a,{isNight:!0},o)+D.calcByShip.torpedoPower(e,r,i,a,{isNight:!0,returnZero:!0},o)+p+(o.nightExtra||0),D.shipType.Submarines.indexOf(e.type)>-1&&n.torpedoLateModel>=1&&n.submarineEquipment>=1?(u.type="雷击CI",u.damage=Math.floor(1.75*u.damage),u.hit=2):D.shipType.Submarines.indexOf(e.type)>-1&&n.torpedoLateModel>=2?(u.type="雷击CI",u.damage=Math.floor(1.6*u.damage),u.hit=2):n.torpedo>=2?(u.type="雷击CI",u.damage=Math.floor(1.5*u.damage),u.hit=2):n.main>=3?(u.type="炮击CI",u.damage=Math.floor(2*u.damage),u.hit=1):2==n.main&&n.secondary>=1?(u.type="炮击CI",u.damage=Math.floor(1.75*u.damage),u.hit=1):D.shipType.Destroyers.indexOf(e.type)>-1&&n.torpedo>=1&&n.radarSurface>=1&&n.surfaceShipPersonnel>=1?(u.type="电探CI",u.damage=Math.floor(1.25*u.damage),u.hit=1):D.shipType.Destroyers.indexOf(e.type)>-1&&n.torpedo>=1&&n.radarSurface>=1&&n.main>=1?(u.type="电雷CI",u.damage=S[267]?Math.floor(1.625*u.damage):Math.floor(1.3*u.damage),u.hit=1):n.main>=1&&1==n.torpedo?(u.type="炮雷CI",u.damage=Math.floor(1.3*u.damage),u.hit=2):2==n.main&&n.secondary<=0&&n.torpedo<=0||1==n.main&&n.secondary>=1&&n.torpedo<=0||0==n.main&&n.secondary>=2&&n.torpedo>=0?(u.type="连击",u.damage=Math.floor(1.2*u.damage),u.hit=2):(u.type="通常",u.damage=Math.floor(u.damage),u.hit=1)}var _=" ";if(u.isMax&&(_=" ≤ "),u.isMin&&(_=" ≥ "),u.value=""+u.type+_+u.damage,u.hit&&u.hit>1&&(u.value+=" x "+u.hit),Array.isArray(u.cis)&&u.cis.length)u.value+=" (CI"+_+u.cis.sort(function(e,t){return e[0]-t[0]}).map(function(e){return e[0]+(e[1]&&e[1]>1?" x "+e[1]:"")}).join(" 或 ")+")";else if(u.damage_ci){var R=u.hit_ci||u.hit||1;u.value+=" (CI"+_+u.damage_ci+")",R&&R>1&&(u.value+=" x "+R)}return u},D.calcByShip.fighterPower_v2=function(e,t,r,i){var a=[0,0];return C(e.slot).map(function(e,s){var n=D.calc.fighterPower(t[s],e,i[s]||0,r[s]||0);a[0]+=n[0],a[1]+=n[1]}),a},D.calcByShip.losPower=function(e,t,r,i,a){(a=a||{}).shipLv=a.shipLv||1,a.hqLv=a.hqLv||1,a.shipLv<0&&(a.shipLv=1),a.hqLv<0&&(a.hqLv=1);var s={DiveBombers:0,TorpedoBombers:0,CarrierRecons:0,SeaplaneRecons:0,SeaplaneBombers:0,SmallRadars:0,LargeRadars:0,Searchlights:0,statLos:Math.sqrt(e.getAttribute("los",a.shipLv)),hqLv:a.hqLv};return t.forEach(function(e){if(e)for(var t in s)A[t]&&A[t].push&&A[t].indexOf(e.type)>-1&&(s[t]+=e.stat.los)}),D.calc.losPower(s)},D.calcByShip.TP=function(e,t){if(!e||!t||!t.push)return 0;e=S(e);var r={ship:{},equipment:{}};return r.ship[e.type]=1,t.forEach(function(e){if(e){var t="number"==typeof e?e:_(e).id;r.equipment[t]||(r.equipment[t]=0),r.equipment[t]++}}),e.getCapability("count_as_landing_craft")&&(r.equipment[68]||(r.equipment[68]=0),r.equipment[68]++),D.calc.TP(r)},D.calcByShip.speed=function(e,t,r,a,s){if(!e)return"";if("object"===(void 0===r?"undefined":i(r))&&r.push)return D.calcByShip.speed(e,t,[],[],r);if("object"===(void 0===a?"undefined":i(a))&&a.push)return D.calcByShip.speed(e,t,r,[],a);e=S(e),t=t||[],s=s||{};var n=parseInt(e.stat.speed),o=function(e){return e=Math.min(20,e||n),s.returnNumber?e:m.statSpeed[e]},u={33:0,34:0,87:0},p=e._speedRule||"low-2",l=0;if(t.forEach(function(e){if(e){var t="number"==typeof e?e:_(e).id;void 0!==u[""+t]&&u[""+t]++}}),!u[33])return o();switch(p){case"low-1":l=u[34]&&!u[87]?.5:u[34]>=2&&u[87]?1.5:.3*Math.min(u[34],1)+.7*u[87];break;case"low-2":case"high-3":(u[34]||u[87])&&(l=Math.min(1,u[34]/3+.5*u[87]));break;case"low-3":case"high-4":(u[34]||u[87])&&(n+=5);break;case"high-1":l=.5*u[34]+1*u[87];break;case"high-2":l=.5*u[34]+.5*u[87];break;case"low-4":l=.5}return l>0&&l<1?n+=5:l>=1&&l<1.5?n+=10:l>=1.5&&(n+=15),o()},D.calcByShip.fireRange=function(e,r,i,a,s,n){if(!e)return"-";r=r||[],s=s||{},n=n||t(e,r,i,a);var o=parseInt(e.stat.range);return r.forEach(function(e){e&&(o=Math.max(o,_(e).stat.range||0))}),isNaN(n.range)||(o+=parseInt(n.range)),m.statRange[Math.min(4,o)]},D.calcByFleet.los33=function(e,t){var r=[],i=[];return e.forEach(function(e){if(Array.isArray(e)){var t=e[0];if(t){var a=e[2],s=e[3],n=e[4];i.push({id:t,lv:e[1][0]}),a.forEach(function(e,t){r.push({id:e,star:s[t],rank:n[t]})})}}}),D.calc.los33({hq:t,equipments:r,ships:i})},D.calcByField.fighterPower=function(e){var t=[0,0],r=1,i=function(e){return r=Math.max(e,r)};return e.forEach(function(e){var r=_(e[0]||e.equipment||e.equipmentId),a=e[1]||e.star||0,s=e[2]||e.rank||0,n=e[3]||e.carry||0;n||(n=D.equipmentType.Recons.indexOf(r.type)>-1?m.planesPerSlotLBAS.recon:m.planesPerSlotLBAS.attacker);var o=D.calc.fighterPower(r,n,s,a,{isFromField:!0});if(t[0]+=o[0],t[1]+=o[1],312==r.id)i(1.18);else switch(r.type){case A.LandBasedRecon:i(1.15)}}),t[0]=t[0]*r,t[1]=t[1]*r,t},D.calcByField.fighterPowerAA=function(e){var t=[0,0],r=1;function i(e){return r=Math.max(e,r)}return e.forEach(function(e){var r=_(e[0]||e.equipment||e.equipmentId),a=e[1]||e.star||0,s=e[2]||e.rank||0,n=e[3]||e.carry||0;n||(n=D.equipmentType.Recons.indexOf(r.type)>-1?m.planesPerSlotLBAS.recon:m.planesPerSlotLBAS.attacker);var o=D.calc.fighterPowerAA(r,n,s,a,{isFromField:!0});switch(t[0]+=o[0],t[1]+=o[1],r.type){case A.CarrierRecon:case A.CarrierRecon2:r.stat.los<=7?i(1.2):r.stat.los>=9?i(1.3):i(1.25);break;case A.ReconSeaplane:case A.ReconSeaplaneNight:case A.LargeFlyingBoat:r.stat.los<=7?i(1.1):r.stat.los>=9?i(1.16):i(1.13);break;case A.LandBasedRecon:i(1.18)}}),t[0]=t[0]*r,t[1]=t[1]*r,t},D.getBonus=function(e,r,i,a,s){return t(e,r,i,a,s)},Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){var r;if(null==this)throw new TypeError('"this" is null or not defined');var i=Object(this),a=i.length>>>0;if(0===a)return-1;var s=+t||0;if(Math.abs(s)===1/0&&(s=0),s>=a)return-1;for(r=Math.max(s>=0?s:a-Math.abs(s),0);r<a;){if(r in i&&i[r]===e)return r;r++}return-1}),m.Entity=b,m.Equipment=y,m.Ship=g,m.Consumable=v,m.formula=D,m}()},function(e,t,r){"use strict";var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e};function a(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}var s=r(11),n=[].concat(a(r(12)),a(r(13)),a(r(14)),a(r(15)),a(r(16)),a(r(17)),a(r(18)),a(r(19)),a(r(20)),a(r(21)),a(r(22)),a(r(23)),a(r(24)),a(r(25)),a(r(26)),a(r(27)),a(r(28)),a(r(29)),a(r(30)),a(r(31)),a(r(32)),a(r(33)),a(r(34)),a(r(35)),a(r(36)),a(r(37)),a(r(38)),a(r(39)),a(r(40)),a(r(41)),a(r(42)),a(r(43)),a(r(44)),a(r(45)),a(r(46)),a(r(47)),a(r(48)),a(r(49)),a(r(50)),a(r(51)),a(r(52)),a(r(53)),a(r(54)),a(r(55)),a(r(56)),a(r(57))),o=n.filter(s);o.forEach(function(e,t){e.list.every(function(e){return!isNaN(e)})&&o.forEach(function(r,a){t===a||e.list.length>=r.list.length||!e.list.every(function(e){return r.list.includes(e)})||(r.bonusAccumulate||(r.bonusAccumulate=i({},r.bonus||{})),Object.keys(e.bonus).forEach(function(t){void 0===r.bonusAccumulate[t]&&(r.bonusAccumulate[t]=0),r.bonusAccumulate[t]+=e.bonus[t]}))})}),e.exports=n},function(e,t,r){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports=function(e){return"object"===(void 0===e?"undefined":i(e))&&("object"===i(e.equipments)||"object"===i(e.list))}},function(e,t,r){"use strict";e.exports=[{equipment:293,ship:{isClass:[92,94]},bonus:{fire:1,aa:1,evasion:2}},{equipment:293,ship:{isClass:[84,12]},bonus:{fire:2,aa:1,evasion:3}},{list:[293,"SurfaceRadar"],equipments:{hasID:[293],hasSurfaceRadar:!0},ship:{isClass:[92,94]},bonus:{fire:2,evasion:3,asw:1}},{list:[293,"SurfaceRadar"],equipments:{hasID:[293],hasSurfaceRadar:!0},ship:{isClass:[84,12]},bonus:{fire:2,torpedo:1,evasion:3}},{list:[293,174],equipments:[{isID:293},{isID:174}],ship:{isClass:[84,12]},bonus:{fire:2,torpedo:4}},{list:[293,174,174],equipments:[{isID:293},{isID:174},{isID:174}],ship:{isClass:[84,12]},bonus:{fire:1,torpedo:3}}]},function(e,t,r){"use strict";var i=r(0).CL_NagaraClass2ndRemodel;e.exports=[{equipment:229,ship:{isType:[31]},bonusImprove:{7:{fire:1,aa:1}}},{equipment:229,ship:{isClass:[84,12]},bonusImprove:{7:{fire:1,aa:1}}},{equipment:229,ship:{isID:[487]},bonusImprove:{7:{fire:2,aa:2}}},{equipment:229,ship:{isID:[488]},bonusImprove:{7:{fire:2,aa:3}}},{list:[{id:229,star:10},"SurfaceRadar"],equipments:[{isID:229,improvement:7},{isSurfaceRadar:!0}],ship:{isType:[31]},bonus:{fire:1,evasion:4}},{list:[{id:229,star:10},"SurfaceRadar"],equipments:[{isID:229,improvement:7},{isSurfaceRadar:!0}],ship:{isClass:[84,12]},bonus:{fire:2,evasion:3}},{list:[{id:229,star:10},"SurfaceRadar"],equipments:[{isID:229,improvement:7},{isSurfaceRadar:!0}],ship:{isID:i},bonus:{fire:3,evasion:2}}]},function(e,t,r){"use strict";var i=r(1),a=i.DD_Fubuki,s=i.DD_Ayanami,n=i.DD_Akatsuki;e.exports=[{equipment:297,ship:{isClass:[s,n]},bonus:{evasion:1}},{equipment:297,ship:{isClass:[a]},bonus:{evasion:2}}]},function(e,t,r){"use strict";var i=r(1).group_DD_Tokugata;e.exports=[{equipment:294,ship:{isClass:i},bonus:{fire:1}},{list:[294,"SurfaceRadar"],equipments:{hasID:[294],hasSurfaceRadar:!0},ship:{isClass:i},bonus:{fire:3,torpedo:1,evasion:2}},{list:[294,125],equipments:[{isID:294},{isID:125}],ship:{isClass:i},bonus:{fire:1,torpedo:3}},{list:[294,125,125],equipments:[{isID:294},{isID:125},{isID:125}],ship:{isClass:i},bonus:{fire:1,torpedo:2}},{list:[294,285],equipments:[{isID:294},{isID:285}],ship:{isClass:i},bonus:{fire:1,torpedo:4}},{list:[294,285,285],equipments:[{isID:294},{isID:285},{isID:285}],ship:{isClass:i},bonus:{fire:1,torpedo:2}}]},function(e,t,r){"use strict";var i=r(1).group_DD_Tokugata;e.exports=[{equipment:295,ship:{isClass:i},bonus:{fire:2,aa:2}},{list:[295,"SurfaceRadar"],equipments:{hasID:[295],hasSurfaceRadar:!0},ship:{isClass:i},bonus:{fire:3,torpedo:1,evasion:2}},{list:[295,"AARadar"],equipments:{hasID:[295],hasAARadar:!0},ship:{isClass:i},bonus:{aa:6}},{list:[295,125],equipments:[{isID:295},{isID:125}],ship:{isClass:i},bonus:{fire:1,torpedo:3}},{list:[295,125,125],equipments:[{isID:295},{isID:125},{isID:125}],ship:{isClass:i},bonus:{torpedo:2}},{list:[295,285],equipments:[{isID:295},{isID:285}],ship:{isClass:i},bonus:{fire:1,torpedo:4}},{list:[295,285,285],equipments:[{isID:295},{isID:285},{isID:285}],ship:{isClass:i},bonus:{torpedo:2}},{list:[295,125,285],equipments:[{isID:295},{isID:125},{isID:285}],ship:{isClass:i},bonus:{torpedo:-1}}]},function(e,t,r){"use strict";var i=r(0),a=i.DD_AyanamiClassRemodelAll,s=i.DD_AkatsukiClassRemodelAll,n=i.DD_HatsuharuClassRemodelAll;e.exports=[{equipment:63,ship:{isID:a.concat(s).concat(n)},bonus:{aa:1}},{equipment:63,ship:{isID:[242,497,498]},bonus:{evasion:1}},{equipment:63,ship:{isID:[145]},bonus:{fire:1}},{equipment:63,ship:{isID:[469]},bonus:{evasion:2}},{equipment:63,ship:{isID:[144]},bonus:{fire:1,torpedo:1,aa:1,evasion:2}}]},function(e,t,r){"use strict";var i=r(0).DD_ShiratsuyuClass2ndRemodel,a=r(1),s=a.DD_Ayanami,n=a.DD_Akatsuki,o=a.DD_Hatsuharu,u=a.DD_Shiratsuyu,p=[s,n,u],l=[s,n,o];e.exports=[{equipment:296,ship:{isClass:p,isNotID:i},bonus:{fire:1}},{equipment:296,ship:{isClass:[o]},bonus:{fire:1,evasion:1}},{equipment:296,ship:{isID:[497]},bonus:{fire:2,evasion:2}},{equipment:296,ship:{isID:[145]},bonus:{fire:2,aa:1,evasion:1}},{equipment:296,ship:{isID:[498]},bonus:{fire:1,aa:1,evasion:2}},{equipment:296,ship:{isID:[144]},bonus:{fire:2,torpedo:1,evasion:1}},{equipment:296,ship:{isID:[469]},bonus:{fire:1,evasion:2}},{list:[296,"SurfaceRadar"],equipments:{hasID:[296],hasSurfaceRadar:!0},ship:{isClass:l},bonus:{fire:1,torpedo:2,evasion:2}},{list:[296,"SurfaceRadar"],equipments:{hasID:[296],hasSurfaceRadar:!0},ship:{isClass:[u]},bonus:{fire:1,torpedo:3,evasion:2}},{list:[296,"AARadar"],equipments:{hasID:[296],hasAARadar:!0},ship:{isClass:l},bonus:{aa:5}},{list:[296,"AARadar"],equipments:{hasID:[296],hasAARadar:!0},ship:{isClass:[u]},bonus:{aa:6}},{list:[296,285],equipments:[{isID:296},{isID:285}],ship:{isClass:l},bonus:{fire:1,torpedo:3}},{list:[296,286],equipments:[{isID:296},{isID:286}],ship:{isClass:[u]},bonus:{fire:1,torpedo:3}}]},function(e,t,r){"use strict";var i=r(0).DD_KagerouClass2ndRemodel,a=[145,228,557],s=i.concat(a);e.exports=[{equipment:266,ship:{isClass:[19,20,21],isNotID:s},bonus:{fire:1}},{equipment:266,ship:{isID:a},bonus:{fire:1,evasion:1}},{equipment:266,ship:{isID:i},bonusCount:{1:{fire:2},2:{fire:5},3:{fire:6}}},{list:[266,"SurfaceRadar"],equipments:{hasID:[266],hasSurfaceRadar:!0},ship:{isClass:[19,20]},bonus:{fire:1,torpedo:3,evasion:1}},{list:[266,"SurfaceRadar"],equipments:{hasID:[266],hasSurfaceRadar:!0},ship:{isClass:[21]},bonus:{fire:2,torpedo:3,evasion:1}}]},function(e,t,r){"use strict";var i=r(0),a=i.DD_KagerouClass2ndRemodel,s=i.DD_YuugumoClass2ndRemodel,n=i.DD_ShimakazeRemodel;e.exports=[{equipment:267,ship:{isClass:[21],isNotID:a},bonus:{fire:1,evasion:1}},{equipment:267,ship:{isClass:[22,24],isNotID:s},bonus:{fire:2,evasion:1}},{equipment:267,ship:{isID:a},bonusCount:{1:{fire:2,evasion:1},2:{fire:3,evasion:2},3:{fire:4,evasion:3}}},{equipment:267,ship:{isID:s},bonus:{fire:3,evasion:1}},{list:[267,"SurfaceRadar"],equipments:{hasID:[267],hasSurfaceRadar:!0},ship:{isID:n},bonus:{fire:1,torpedo:3,evasion:2}},{list:[267,"SurfaceRadar"],equipments:{hasID:[267],hasSurfaceRadar:!0},ship:{isClass:[22],isNotID:s},bonus:{fire:2,torpedo:3,evasion:1}},{list:[267,"SurfaceRadar"],equipments:{hasID:[267],hasSurfaceRadar:!0},ship:{isID:s},bonus:{fire:3,torpedo:4,evasion:3}}]},function(e,t,r){"use strict";var i=r(1).group_DD_Navy_USN;e.exports=[{equipment:313,ship:{isClass:i},bonus:{fire:2,aa:2,evasion:1,armor:1}}]},function(e,t,r){"use strict";var i=r(1).group_DD_Navy_USN;e.exports=[{equipment:308,ship:{isType:[1,19],isNotClass:[112]},bonus:{fire:1}},{equipment:308,ship:{isClass:i},bonus:{fire:2,aa:1,evasion:1}}]},function(e,t,r){"use strict";var i=r(1),a=i.CL_Yuubari,s=i.CT_Katori,n=i.AV_Nisshin;e.exports=[{equipment:4,ship:{isClass:[a,s]},bonus:{fire:1}},{equipment:4,ship:{isClass:[n]},bonus:{fire:2,torpedo:1}}]},function(e,t,r){"use strict";var i=r(1),a=i.CL_Yuubari,s=i.CT_Katori,n=i.AV_Nisshin;e.exports=[{equipment:310,ship:{isClass:[a]},bonus:{fire:2,aa:1,evasion:1}},{equipment:310,ship:{isClass:[s]},bonus:{fire:2,evasion:1}},{equipment:310,ship:{isClass:[n]},bonus:{fire:3,torpedo:2,aa:1,evasion:1}}]},function(e,t,r){"use strict";var i=r(1),a=i.CA_Furutaka,s=i.CA_Aoba;e.exports=[{equipment:90,ship:{isID:[416,417,295]},bonus:{fire:1}},{equipment:90,ship:{isID:[264]},bonus:{fire:1,aa:1}},{equipment:90,ship:{isID:[142]},bonus:{fire:2,evasion:1}},{list:[90,"SurfaceRadar"],equipments:{hasID:[90],hasSurfaceRadar:!0},ship:{isClass:[a,s]},bonus:{fire:3,torpedo:2,evasion:2}},{list:[90,"AARadar"],equipments:{hasID:[90],hasAARadar:!0},ship:{isID:[264]},bonus:{aa:5,evasion:2}}]},function(e,t,r){"use strict";var i=r(1),a=i.CL_Kuma,s=i.CL_Nagara,n=i.CL_Sendai,o=i.CL_Agano,u=i.CLT_Kuma,p=i.CL_Gotland,l=i.CLV_Gotland;e.exports=[{equipment:303,ship:{isClass:[a,s,n,o,u]},bonus:{fire:1,aa:1}},{equipment:303,ship:{isClass:[p,l]},bonus:{fire:1,aa:2,evasion:1}}]},function(e,t,r){"use strict";e.exports=[{equipment:104,ship:{isID:[150,152]},bonus:{fire:1}},{equipment:104,ship:{isID:[149]},bonus:{fire:2}},{equipment:104,ship:{isID:[151]},bonus:{fire:2,aa:1,evasion:2}}]},function(e,t,r){"use strict";e.exports=[{equipment:289,ship:{isID:[150,152]},bonus:{fire:1}},{equipment:289,ship:{isID:[149]},bonus:{fire:2,aa:1}},{equipment:289,ship:{isID:[151]},bonus:{fire:2,aa:2,evasion:2}},{list:[289,"SurfaceRadar"],equipments:{hasID:[289],hasSurfaceRadar:!0},ship:{isID:[149,151]},bonus:{fire:2,evasion:2}}]},function(e,t,r){"use strict";var i=r(0),a=i.BB_IseClassRemodel,s=i.BB_IseClass2ndRemodel,n=i.BB_IseClassRemodelAll,o=i.BB_FusouClass2ndRemodel;e.exports=[{equipment:290,ship:{isID:o},bonus:{fire:1}},{equipment:290,ship:{isID:a},bonus:{fire:2,aa:2,evasion:1}},{equipment:290,ship:{isID:s},bonus:{fire:3,aa:2,evasion:1}},{list:[290,"AARadar"],equipments:{hasID:[290],hasAARadar:!0},ship:{isID:n},bonus:{aa:2,evasion:3}}]},function(e,t,r){"use strict";var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},a=r(1),s=a.BB_QueenElizabeth,n={ship:{isClass:[a.BB_Nelson]},bonus:{fire:2,armor:1}},o={ship:{isClass:[s]},bonus:{fire:2,armor:1,evasion:-2}},u={ship:{isID:[149]},bonus:{fire:1,armor:1,evasion:-3}},p=[];[298,299,300].forEach(function(e){p.push(i({equipment:e},u)),p.push(i({equipment:e},o)),p.push(i({equipment:e},n))}),e.exports=p},function(e,t,r){"use strict";var i=r(1).DD_Kamikaze;e.exports=[{equipment:174,ship:{isClass:[i]},bonus:{torpedo:1,evasion:2}}]},function(e,t,r){"use strict";var i=r(1).group_DD_Navy_USN;e.exports=[{equipment:314,ship:{isClass:i},bonus:{fire:1,torpedo:3}}]},function(e,t,r){"use strict";var i=r(0),a=i.DD_FubukiClass2ndRemodel,s=i.DD_AyanamiClass2ndRemodel,n=i.DD_AkatsukiClass2ndRemodel,o=i.DD_HatsuharuClass2ndRemodel,u=a.concat(s,n,o);e.exports=[{equipment:285,ship:{isID:u},bonusImprove:{0:{torpedo:2,evasion:1},10:{fire:1,torpedo:2,evasion:1}}}]},function(e,t,r){"use strict";var i=r(0).DD_KagerouClass2ndRemodel;e.exports=[{equipment:15,ship:{isID:i},bonusCount:{1:{torpedo:2},2:{torpedo:4}}}]},function(e,t,r){"use strict";var i=r(0),a=i.DD_ShiratsuyuClass2ndRemodel,s=i.DD_AsashioClass2ndRemodel,n=i.DD_KagerouClass2ndRemodel,o=i.DD_YuugumoClass2ndRemodel,u=a.concat(s,o);e.exports=[{equipment:286,ship:{isID:u},bonusImprove:{0:{torpedo:2,evasion:1},10:{fire:1,torpedo:2,evasion:1}}},{equipment:286,ship:{isID:n},bonusImprove:{0:{torpedo:2,evasion:1},5:{torpedo:3,evasion:1},10:{fire:1,torpedo:3,evasion:1}}}]},function(e,t,r){"use strict";var i=r(1),a=i.CLT_Kuma,s=i.DD_Shimakaze,n=i.DD_Akizuki;e.exports=[{equipment:58,ship:{isClass:[a,s,n]},bonus:{torpedo:1}}]},function(e,t,r){"use strict";var i=r(1).DD_Akizuki;e.exports=[{equipment:179,ship:{isClass:i},bonus:{torpedo:1}}]},function(e,t,r){"use strict";e.exports=[{equipment:67,ship:{canEquip:[12],isNotType:[13,14]},bonus:{torpedo:-5}}]},function(e,t,r){"use strict";var i=r(1),a=i.CL_Kuma,s=i.CL_Nagara,n=i.CL_Sendai,o=i.CL_Agano,u=i.CLT_Kuma,p=i.CL_Gotland,l=i.CLV_Gotland;e.exports=[{equipment:304,ship:{isClass:[a,s,n,o,u]},bonus:{fire:1,evasion:1,asw:1}},{equipment:304,ship:{isClass:[p,l]},bonus:{fire:1,evasion:2,asw:2}}]},function(e,t,r){"use strict";var i=r(0),a=i.BB_IseClass2ndRemodel,s=i.BB_IseClassRemodel_PLUS_FusouClass2ndRemodel;e.exports=[{equipment:79,ship:{isID:s},bonus:{fire:2}},{equipment:79,ship:{isID:a},bonus:{fire:3}}]},function(e,t,r){"use strict";var i=r(0),a=i.BB_IseClass2ndRemodel,s=i.BB_IseClassRemodel_PLUS_FusouClass2ndRemodel;e.exports=[{equipment:81,ship:{isID:s},bonus:{fire:2}},{equipment:81,ship:{isID:a},bonus:{fire:3}}]},function(e,t,r){"use strict";var i=r(0),a=i.BB_IseClassRemodel,s=i.BB_IseClass2ndRemodel,n=i.BB_FusouClass2ndRemodel;e.exports=[{equipment:237,ship:{isID:n},bonus:{fire:2}},{equipment:237,ship:{isID:a},bonus:{fire:3,evasion:1}},{equipment:237,ship:{isID:s},bonus:{fire:4,evasion:2}}]},function(e,t,r){"use strict";var i=r(0).BB_IseClass2ndRemodel;e.exports=[{equipment:24,ship:{isID:i},bonus:{fire:2}}]},function(e,t,r){"use strict";var i=r(0).BB_IseClass2ndRemodel;e.exports=[{equipment:111,ship:{isID:i},bonus:{fire:2}}]},function(e,t,r){"use strict";var i=r(0).BB_IseClass2ndRemodel;e.exports=[{equipment:57,ship:{isID:i},bonus:{fire:2}}]},function(e,t,r){"use strict";var i=r(0).BB_IseClass2ndRemodel;e.exports=[{equipment:100,ship:{isID:i},bonus:{fire:4}}]},function(e,t,r){"use strict";var i=r(0).BB_IseClass2ndRemodel;e.exports=[{equipment:291,ship:{isID:i},bonus:{fire:6,evasion:1}}]},function(e,t,r){"use strict";var i=r(0).BB_IseClass2ndRemodel;e.exports=[{equipment:292,ship:{isID:i},bonus:{fire:8,aa:1,evasion:2}}]},function(e,t,r){"use strict";var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},a={ship:{isID:[380,529,381,536]},bonus:{asw:1,evasion:1}};e.exports=[i({equipment:82},a),i({equipment:302},a)]},function(e,t,r){"use strict";var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},a={ship:{isID:[353,365]},bonus:{fire:1,evasion:1}},s={ship:{isID:[380,529]},bonus:{asw:1,evasion:1}},n={ship:{isID:[381,536]},bonus:{asw:3,evasion:2}};e.exports=[i({equipment:305},a),i({equipment:305},s),i({equipment:305},n),i({equipment:306},a),i({equipment:306},s),i({equipment:306},n)]},function(e,t,r){"use strict";var i=r(0).BB_IseClass2ndRemodel;e.exports=[{equipment:61,ship:{isID:i},bonus:{fire:3,armor:1,evasion:2,range:"1"}}]},function(e,t,r){"use strict";var i=r(1).group_Navy_USN;e.exports=[{equipment:307,ship:{isClass:i},bonus:{fire:1,aa:1,evasion:1}}]},function(e,t,r){"use strict";var i=r(1),a=i.group_Navy_USN,s=i.DD_JohnCButler,n=[].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(a));n.splice(n.indexOf(s),1),e.exports=[{equipment:315,ship:{isClass:n},bonus:{fire:2,evasion:3,los:4}},{equipment:315,ship:{isClass:s},bonus:{fire:3,evasion:3,los:4,range:"1"}}]},function(e,t,r){"use strict";var i=r(1).group_Navy_RN;e.exports=[{equipment:301,ship:{isClass:i},bonus:{aa:2,evasion:1,armor:1}}]},function(e,t,r){"use strict";var i=r(0).CL_KumaClassRemodelAll;e.exports=[{equipment:268,ship:{canEquip:[33]},bonusArea:{North:{armor:3}}},{equipment:268,ship:{isID:i},bonusCount:{1:{armor:2,evasion:7}}}]},function(e,t,r){"use strict";e.exports=[{equipment:74,ship:{isID:[132,301]},bonus:{fire:1}},{equipment:74,ship:{isID:[20,228]},bonus:{aa:1}},{equipment:74,ship:{isID:[86,210,150,85,212,152,69,272,427,34,234,437]},bonusCount:{1:{fire:2,evasion:-1}}},{equipment:74,ship:{isID:[55,223,159]},bonusCount:{1:{fire:2,torpedo:2,evasion:-1}}}]},function(e,t,r){"use strict";e.exports=[{equipment:140,ship:{isID:[86,210,150,85,212,152]},bonusCount:{1:{fire:3,evasion:-2}}}]},function(e,t,r){"use strict";var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=r(59),n=r(5),o=r(62),u=r(3);e.exports=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],p=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],c=arguments[4];if("string"==typeof p)return e(t,r,void 0,void 0,p);if("string"==typeof l)return e(t,r,p,void 0,l);var f=s(t,r,p,l);t=f.ship,r=f.equipments,p=f.equipmentStars,l=f.equipmentRanks;var h={},m=u.filter(function(e){return n(t,e.ship)}),d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var t in e)void 0===h[t]?h[t]=e[t]:"number"==typeof h[t]?h[t]+=e[t]:h[t]=e[t]};return m.filter(function(e){return"number"==typeof e.equipment&&r.some(function(t){return t&&t.id&&t.id==e.equipment})}).forEach(function(e){var t={};if("object"===a(e.bonusImprove)){var s=Object.keys(e.bonusImprove).sort(function(e,t){return parseInt(t)-parseInt(e)});r.forEach(function(r,i){r&&r.id&&r.id==e.equipment&&s.some(function(r){if(p[i]>=r){for(var a in e.bonusImprove[r])void 0===t[a]?t[a]=e.bonusImprove[r][a]:"number"==typeof t[a]?t[a]+=e.bonusImprove[r][a]:t[a]=e.bonusImprove[r][a];return!0}return!1})})}else{var n=0;if(r.forEach(function(t){t&&t.id&&t.id==e.equipment&&n++}),"object"===a(e.bonusCount))Object.keys(e.bonusCount).sort(function(e,t){return parseInt(t)-parseInt(e)}).some(function(r){return n>=r&&(t=i({},e.bonusCount[r]),!0)});else if("object"===a(e.bonus))for(var o in t=i({},e.bonus))t[o]="number"==typeof t[o]?t[o]*n:parseInt(t[o])}d(t)}),m.filter(function(e){return"object"===a(e.equipments)&&o(r,p,l,e.equipments)}).forEach(function(e){d(e.bonus)}),"string"==typeof c?h[c]||0:h}},function(e,t,r){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var a=r(2),s=r(4);e.exports=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return"number"!=typeof t&&"string"!=typeof t||(t=[t]),"number"!=typeof r&&"string"!=typeof r||(r=[r]),"number"!=typeof n&&"string"!=typeof n||(n=[n]),e=a(e),t=[].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(Array(Math.max(5,e.slot.length+1)))).map(function(r,i){if(e&&!(e.slot.length<=i&&i<4))return s(t[i])||void 0}),{ship:e,equipments:t,equipmentStars:t.map(function(e,a){return"object"===i(t[a])?Math.min(10,parseInt(r[a])||0):void 0}),equipmentRanks:t.map(function(e,r){return"object"===i(t[r])?Math.min(7,parseInt(n[r])||0):void 0})}}},function(e,t,r){"use strict";e.exports=function(e,t){return Array.isArray(e)?e.some(t):t(e)}},function(e,t,r){"use strict";e.exports=function(e,t){return Array.isArray(e)?e.every(t):t(e)}},function(e,t,r){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s=r(7),n=["id","name","nameof","type"];e.exports=function e(t,r,o){var u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if("object"===(void 0===r?"undefined":i(r))&&!Array.isArray(r))return e(t,[],[],r);if("object"===(void 0===o?"undefined":i(o))&&!Array.isArray(o))return e(t,r,[],o);if(!Array.isArray(t))return e([t],r,o,u);if(Array.isArray(r)||(r=[r]),Array.isArray(o)||(o=[o]),Array.isArray(u)){var p=[].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(t));return u.every(function(e){return p.some(function(t,i){return!!s(t,r[i],o[i],e)&&(p.splice(i,1),!0)})})}var l=function(e){if(void 0===u[e])return"continue";if(!1===u[e]){if(!t.every(function(t,i){return s(t,r[i],o[i],a({},e.replace(/^has/,"is"),u[e]))}))return{v:!1}}else if(!0===u[e]){if(!t.some(function(t,i){return s(t,r[i],o[i],a({},e.replace(/^has/,"is"),u[e]))}))return{v:!1}}else if("has"===e.substr(0,3)&&n.includes(e.substr(3).toLowerCase())){if(Array.isArray(u[e])){if(!u[e].every(function(i){return t.some(function(t,n){return s(t,r[n],o[n],a({},e.replace(/^has/,"is"),i))})}))return{v:!1}}else if(!t.some(function(t,i){return s(t,r[i],o[i],a({},e.replace(/^has/,"is"),u[e]))}))return{v:!1}}else if("has"!==e.substr(0,3)||"object"!==i(u[e])||Array.isArray(u[e])){if("has"!==e.substr(0,3)||isNaN(u[e])){if("has"===e.substr(0,3)&&Array.isArray(u[e])){var p=t.filter(function(t,i){return s(t,r[i],o[i],a({},e.replace(/^has/,"is"),!0))});if(p.length<u[e][0]||p.length>u[e][1])return{v:!1}}}else if(t.filter(function(t,i){return s(t,r[i],o[i],a({},e.replace(/^has/,"is"),!0))}).length<u[e])return{v:!1}}else{var l=Object.assign({},u[e]),c=void 0===l.count?1:l.count;if(delete l.count,t.filter(function(t,i){return s(t,r[i],o[i],a({},e.replace(/^has/,"is"),l))}).length<c)return{v:!1}}};for(var c in u){var f=l(c);switch(f){case"continue":continue;default:if("object"===(void 0===f?"undefined":i(f)))return f.v}}return!0}},function(e,t,r){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports=function(e){return"object"===(void 0===e?"undefined":i(e))&&e.id?e:isNaN(e)?void 0:KC.db.ship_classes[parseInt(e)]}},function(e,t,r){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports=function(e){return"object"===(void 0===e?"undefined":i(e))&&e.id?e:isNaN(e)?void 0:KC.db.ship_types[parseInt(e)]}}]);