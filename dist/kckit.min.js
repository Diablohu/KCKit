!function(e){var t={};function r(a){if(t[a])return t[a].exports;var i=t[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(a,i,function(t){return e[t]}.bind(null,i));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=9)}([function(e,t,r){"use strict";var a=[82,88],i=[553],n=a.concat(i),s=[411,412],o=a.concat(s),u=[216,217],l=[547,146],p=u.concat(l),c=[207,208,390,391,230,231,232,233],h=[195,407],f=c.concat(h),d=[234,235,236,237],m=[437,147],b=d.concat(m),g=[238,239,240,241],y=[326,419],v=g.concat(y),S=[225,226,227,362,300,228,316,322,317,556,320,557,312,558,313,329,354,355,294,301],C=[566,567,568],A=S.concat(C),R=[542,543],_=[229],D=R.concat(_),B=[571,576,439,364],I=[].concat(B,[515,393,519,394]),q=[440,360],L=[544,396,549,397,433,438,545,550],x=[561,681],N=[].concat(q,L,x);e.exports={BB_KongouClass2ndRemodel:[149,150,151,152],BB_IseClassRemodel:a,BB_IseClass2ndRemodel:i,BB_IseClassRemodelAll:n,BB_FusouClass2ndRemodel:s,BB_IseClassRemodel_PLUS_FusouClass2ndRemodel:o,CL_KumaClassRemodel:u,CL_KumaClass2ndRemodel:l,CL_KumaClassRemodelAll:p,CL_NagaraClass2ndRemodel:[488],DD_FubukiClass2ndRemodel:[426,420],DD_AyanamiClassRemodel:c,DD_AyanamiClass2ndRemodel:h,DD_AyanamiClassRemodelAll:f,DD_AkatsukiClassRemodel:d,DD_AkatsukiClass2ndRemodel:m,DD_AkatsukiClassRemodelAll:b,DD_HatsuharuClassRemodel:g,DD_HatsuharuClass2ndRemodel:y,DD_HatsuharuClassRemodelAll:v,DD_ShiratsuyuClass2ndRemodel:[497,145,498,144,469],DD_AsashioClass2ndRemodel:[463,468,199,489,490,198,464,470],DD_KagerouClassRemodel:S,DD_KagerouClassRemodelB:[557,558],DD_KagerouClass2ndRemodel:C,DD_KagerouClassRemodelAll:A,DD_YuugumoClass2ndRemodel:R,DD_YuugumoClass2ndRemodel_PLUS_ShimakazeRemodel:D,DD_ShimakazeRemodel:_,rn:I,rn_BB:B,usn:N,usn_BB:q,usn_CV:L,usn_DD:x}},function(e,t,r){"use strict";e.exports={BB_QueenElizabeth:85,BB_Nelson:115,CV_ArkRoyal:101,CL_Kuma:48,CL_Nagara:49,CL_Sendai:50,CL_Agano:52,CL_Gotland:114,CLT_Kuma:54,CLV_Gotland:116,DD_Special:[15,16,17],DD_Tokugata:[15,16,17],DD_Fubuki:15,DD_Ayanami:16,DD_Akatsuki:17,DD_Hatsuharu:18,DD_Shiratsuyu:19,DD_Akizuki:23,DD_J:107,group_DD_Tokugata:[15,16,17]}},function(e,t,r){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports=function(e){return"object"===(void 0===e?"undefined":a(e))&&e.id?e:isNaN(e)?void 0:KC.db.ships[parseInt(e)]}},function(e,t,r){"use strict";e.exports=r(10)},function(e,t,r){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports=function(e){return e&&"object"===(void 0===e?"undefined":a(e))&&e.id?e:isNaN(e)?void 0:(KC.db.equipments||KC.db.items||{})[parseInt(e)]}},function(e,t,r){"use strict";var a=r(2),i=r(6),n=i.ArrayOrItem,s=i.ArrayOrItemAll;e.exports=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0===(e=a(e)))return!1;for(var r in t)if(void 0!==t[r]&&!o[r.toLowerCase()](e,t[r]))return!1;return!0};var o={isid:function(e,t){return n(t,function(t){return!isNaN(t)&&parseInt(t)===e.id})},isnotid:function(e,t){return s(t,function(t){return!isNaN(t)&&parseInt(t)!==e.id})},isname:function(e,t){return n(t,function(t){return e.isName(t)})},isnotname:function(e,t){return s(t,function(t){return!e.isName(t)})},istype:function(e,t){return n(t,function(t){return!isNaN(t)&&parseInt(t)===e.type})},isnottype:function(e,t){return s(t,function(t){return!isNaN(t)&&parseInt(t)!==e.type})},isbattleship:function(e,t){return this.istype(e,[8,6,20,7,18])===t},isbb:function(e,t){return this.isbattleship(e,t)},iscarrier:function(e,t){return this.istype(e,[11,10,9,30,32])===t},iscv:function(e,t){return this.iscarrier(e,t)},issubmarine:function(e,t){return this.istype(e,[14,13])===t},isss:function(e,t){return this.issubmarine(e,t)},isclass:function(e,t){return n(t,function(t){return!isNaN(t)&&parseInt(t)===e.class})},isnotclass:function(e,t){return s(t,function(t){return!isNaN(t)&&parseInt(t)!==e.class})},hasslot:function(e,t){return!!Array.isArray(e.slot)&&(Array.isArray(t)?isNaN(t[0])&&!isNaN(t[1])?e.slot.length<=parseInt(t[1]):!isNaN(t[0])&&isNaN(t[1])?e.slot.length>=parseInt(t[0]):!isNaN(t[0])&&!isNaN(t[1])&&(e.slot.length>=parseInt(t[0])&&e.slot.length<=parseInt(t[1])):!isNaN(t)&&parseInt(t)===e.slot.length)},hasslotmin:function(e,t){return this.hasslot(e,[t,void 0])},hasslotmax:function(e,t){return this.hasslot(e,[void 0,t])},minlevel:function(e,t){return void 0===e.level||e.level>=t}}},function(e,t,r){"use strict";var a=r(47),i=r(48);e.exports={ArrayOrItem:a,ArrayOrItemAll:i}},function(e,t,r){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=r(4),n=r(8),s=r(6),o=s.ArrayOrItem,u=s.ArrayOrItemAll,l={isid:function(e,t){return o(t,function(t){return!isNaN(t)&&parseInt(t)===e.id})},isnotid:function(e,t){return u(t,function(t){return!isNaN(t)&&parseInt(t)!==e.id})},isname:function(e,t){return o(t,function(t){return e.isName(t)})},isnotname:function(e,t){return u(t,function(t){return!e.isName(t)})},isnameof:function(e,t){return o(t,function(t){return e.hasName(t)})},isnotnameof:function(e,t){return u(t,function(t){return!e.hasName(t)})},istype:function(e,t,r){return o(t,function(t){if(isNaN(t))return!1;if(parseInt(t)!==e.type)return!1;if("object"===(void 0===r?"undefined":a(r))&&r.hasStat){var i=!0;for(var n in r.hasStat)Array.isArray(r.hasStat[n])?(e.stat[n]<r.hasStat[n][0]&&(i=!1),e.stat[n]>r.hasStat[n][1]&&(i=!1)):e.stat[n]<r.hasStat[n]&&(i=!1);if(!i)return!1}return!0})},isnottype:function(e,t){return u(t,function(t){return!isNaN(t)&&parseInt(t)!==e.type})},isaaradar:function(e,t){return(this.istype(e,n.Radars)&&!isNaN(e.stat.aa)&&e.stat.aa>=1)===t},issurfaceradar:function(e,t){return(this.istype(e,n.Radars)&&!isNaN(e.stat.hit)&&e.stat.hit>=3)===t}};e.exports=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if("object"===(void 0===r?"undefined":a(r)))return e(t,0,0,r);if("object"===(void 0===s?"undefined":a(s)))return e(t,r,0,s);if(void 0===(t=i(t)))return!1;for(var u in o)if(void 0!==o[u]){var p=u.toLowerCase();if(["improve","improvement","star"].includes(p))return(parseInt(r||0)||0)>=parseInt(o[u]);if(l[p]){if(!l[p](t,o[u]))return!1}else if("is"===u.substr(0,2)){var c=u.substr(2);if("HAMountAAFD"===c)c="HAMountsAAFD";else if(c+"s"in n)c+="s";else if(!(c in n))return!1;var h="object"===a(o[u])&&!Array.isArray(o[u]),f=o[u]&&h?o[u]:void 0;if(!l[!0===o[u]||h?"istype":"isnottype"](t,n[c],f))return!1}}return!0}},function(e,t,r){"use strict";var a={SmallCaliber:1,SmallCaliberHigh:2,SmallCaliberHA:2,SmallCaliberAA:3,SmallCaliberAAFD:3,MediumCaliber:4,LargeCaliber:5,SuperCaliber:6,SecondaryGun:7,SecondaryGunHigh:8,SecondaryGunHA:8,SecondaryGunAA:9,SecondaryGunAAFD:9,Type3Shell:10,APShell:11,Torpedo:12,SubmarineTorpedo:13,MidgetSubmarine:14,ReconSeaplane:15,ReconSeaplaneNight:16,SeaplaneBomber:17,CarrierFighter:18,TorpedoBomber:19,DiveBomber:20,CarrierRecon:21,Autogyro:22,AntiSubPatrol:23,SmallRadar:24,LargeRadar:25,DepthCharge:26,Sonar:27,LargeSonar:28,AAGun:29,AAGunConcentrated:30,AAGunCD:30,CDMG:30,AAFireDirector:31,AAFD:31,AviationPersonnel:36,SurfaceShipPersonnel:37,LandingCraft:38,Searchlight:39,SupplyContainer:41,CommandFacility:45,LargeFlyingBoat:45,SearchlightLarge:46,SuparRadar:47,CombatRation:48,CarrierRecon2:50,SeaplaneFighter:51,AmphibiousCraft:52,LandBasedAttacker:53,Interceptor:54,JetBomberFighter:55,JetBomberFighter2:56,TransportMaterial:57,SubmarineEquipment:58,LandBasedFighter:59,CarrierFighterNight:60,TorpedoBomberNight:61,LandBasedAntiSubPatrol:62};a.MainGuns=[a.SmallCaliber,a.SmallCaliberHigh,a.SmallCaliberAA,a.MediumCaliber,a.LargeCaliber,a.SuperCaliber],a.MainCalibers=a.MainGuns,a.SmallCalibers=[a.SmallCaliber,a.SmallCaliberHigh,a.SmallCaliberAA],a.MediumCalibers=[a.MediumCaliber],a.LargeCalibers=[a.LargeCaliber,a.SuperCaliber],a.SecondaryGuns=[a.SecondaryGun,a.SecondaryGunHigh,a.SecondaryGunAA],a.HAMounts=[a.SmallCaliberHigh,a.SmallCaliberAA,a.SecondaryGunHigh,a.SecondaryGunAA],a.HAMountsAAFD=[a.SmallCaliberAA,a.SecondaryGunAA],a.APShells=[a.APShell],a.Torpedos=[a.Torpedo,a.SubmarineTorpedo],a.Seaplanes=[a.ReconSeaplane,a.ReconSeaplaneNight,a.SeaplaneBomber,a.SeaplaneFighter],a.Fighters=[a.SeaplaneBomber,a.CarrierFighter,a.CarrierFighterNight,a.TorpedoBomber,a.TorpedoBomberNight,a.DiveBomber,a.SeaplaneFighter,a.LandBasedAttacker,a.Interceptor,a.JetBomberFighter,a.JetBomberFighter2,a.LandBasedFighter],a.Interceptors=[a.Interceptor,a.LandBasedFighter],a.Recons=[a.ReconSeaplane,a.ReconSeaplaneNight,a.CarrierRecon,a.CarrierRecon2,a.LargeFlyingBoat],a.SeaplaneRecons=[a.ReconSeaplane,a.ReconSeaplaneNight],a.SeaplaneReconsAll=[a.ReconSeaplane,a.ReconSeaplaneNight,a.LargeFlyingBoat],a.SeaplaneBombers=[a.SeaplaneBomber,a.SeaplaneFighter],a.SeaplaneFighters=[a.SeaplaneFighter],a.CarrierFighters=[a.CarrierFighter,a.CarrierFighterNight],a.CarrierRecons=[a.CarrierRecon,a.CarrierRecon2],a.CarrierBased=[a.CarrierFighter,a.CarrierFighterNight,a.TorpedoBomber,a.TorpedoBomberNight,a.DiveBomber,a.CarrierRecon,a.CarrierRecon2,a.JetBomberFighter,a.JetBomberFighter2],a.LandBased=[a.LandBasedAttacker,a.Interceptor,a.JetBomberFighter,a.JetBomberFighter2,a.LandBasedFighter,a.LandBasedAntiSubPatrol],a.TorpedoBombers=[a.TorpedoBomber,a.TorpedoBomberNight],a.DiveBombers=[a.DiveBomber],a.JetBomberFighters=[a.JetBomberFighter,a.JetBomberFighter2],a.Jets=[a.JetBomberFighter,a.JetBomberFighter2],a.Autogyros=[a.Autogyro],a.AntiSubPatrols=[a.AntiSubPatrol,a.LandBasedAntiSubPatrol],a.Aircrafts=[],[].concat(a.Seaplanes).concat(a.Recons).concat(a.CarrierBased).concat(a.Autogyros).concat(a.AntiSubPatrols).concat(a.LandBased).forEach(function(e){a.Aircrafts.indexOf(e)<0&&a.Aircrafts.push(e)}),a.Radars=[a.SmallRadar,a.LargeRadar,a.SuparRadar],a.SmallRadars=[a.SmallRadar],a.LargeRadars=[a.LargeRadar,a.SuparRadar],a.AntiSubmarines=[a.DepthCharge,a.Sonar,a.LargeSonar],a.DepthCharges=[a.DepthCharge],a.Sonars=[a.Sonar,a.LargeSonar],a.AAGuns=[a.AAGun,a.AAGunConcentrated],a.AAFireDirectors=[a.AAFireDirector],a.AAFDs=a.AAFireDirectors,a.Searchlights=[a.Searchlight,a.SearchlightLarge],a.AviationPersonnels=[a.AviationPersonnel],a.SurfaceShipPersonnels=[a.SurfaceShipPersonnel],a.LandingCrafts=[a.LandingCraft,a.AmphibiousCraft],a.AmphibiousCrafts=[a.AmphibiousCraft],a.SupplyContainers=[a.SupplyContainer],a.CombatRations=[a.CombatRation],e.exports=a},function(e,t,r){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}();function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}window.KC=function(){var e=r(3),t=r(45),u=r(5),l=r(7),p=r(2),c=r(50),h=r(51),f=r(8),d={lang:"zh_cn",joint:"・",maxShipLv:175,maxHqLv:120,db:{},path:{db:"/kcdb/",pics:{ships:"/kcpic/ships/"}},statSpeed:{5:"低速",10:"高速",15:"高速+",20:"最速"},getStatSpeed:function(e){return this.statSpeed[parseInt(e)]},statRange:{1:"短",2:"中",3:"长",4:"超长"},getStatRange:function(e){return this.statRange[parseInt(e)]},getFolderGroup:function(e,t){if("undefined"!=typeof node&&node&&node.path){e="/"==e.substr(e.length-1)?e.substr(0,e-1):e,t=parseInt(t);for(var r=1;50*r<t;)r++;return e+"-"+r+"/"}return e},textRank:{1:"|",2:"||",3:"|||",4:"\\",5:"\\\\",6:"\\\\\\",7:"》"},check:{ship:u,equipment:l}},m=function(){function e(t){for(var r in o(this,e),t)this[r]=t[r]}return i(e,[{key:"getName",value:function(e){return e=e||d.lang,this.name?this.name[e]||this.name:null}},{key:"isName",value:function(e,t){if(!0===t&&(t=d.lang),t)return this.name[t]===e;for(var r in this.name)if("suffix"!==r&&this.name[r]===e)return!0;return!1}},{key:"hasName",value:function(e,t){if(!0===t&&(t=d.lang),t)return!!this.name[t].includes(e);for(var r in this.name)if("suffix"!==r&&this.name[r].includes(e))return!0;return!1}},{key:"isNameOf",value:function(){return this.hasName.apply(this,arguments)}},{key:"_name",get:function(){return this.getName()}}]),e}(),b=function(e){function t(e){return o(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return s(t,e),t}(m),g=function(t){function r(e){o(this,r);var t=n(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return Object.defineProperty(t,"rankupgradable",{value:t.isRankUpgradable()}),t}return s(r,t),i(r,[{key:"getName",value:function(e,t){t=t||d.lang;var r=m.prototype.getName.call(this,t),a=e&&1==!e?e:"small";return e?r.replace(/（([^（^）]+)）/g,"<"+a+">($1)</"+a+">"):r}},{key:"getType",value:function(e){return e=e||d.lang,this.type?d.db.item_types[this.type].name[e]:null}},{key:"getIconId",value:function(){return Array.isArray(this.type_ingame)&&this.type_ingame.length>3?this.type_ingame[3]:d.db.item_types[this.type].icon}},{key:"getCaliber",value:function(){var e=this.getName(!1,"ja_jp"),t=parseFloat(e);return t}},{key:"getPower",value:function(){return this.stat[d.db.item_types[this.type].main_attribute||"fire"]}},{key:"isEquipableExSlot",value:function(){return this.equipable_exslot?this.equipable_exslot||!1:this.type&&d.db.item_types[this.type].equipable_exslot||!1}},{key:"isRankUpgradable",value:function(){return R.equipmentType.Aircrafts.includes(this.type)&&this.type!==R.equipmentType.Autogyro&&this.type!==R.equipmentType.AntiSubPatrol}},{key:"getStat",value:function(e,t){e=e.toLowerCase();var r=this.stat[e];if(!t||void 0===r||!Array.isArray(this.stat_bonus))return r;if(t&&Array.isArray(this.stat_bonus)){"object"!==(void 0===t?"undefined":a(t))&&(t=d.db.ships[t]);var i=t.id,n=void 0;if(this.stat_bonus.forEach(function(e){Array.isArray(e.ships)&&e.ships.some(function(t){if(t==i){for(var r in e.bonus)n||(n={}),n[r]=Math.max(e.bonus[r],n[r]||0);return!0}return!1}),Array.isArray(e.ship_classes)&&e.ship_classes.some(function(r){if(r==t.class){for(var a in e.bonus)n||(n={}),n[a]=Math.max(e.bonus[a],n[a]||0);return!0}return!1})}),n)return r+(n[e]||0)}return r}},{key:"getBonuses",value:function(){var t=this;return e.filter(function(e){if(e.equipment==t.id)return!0;if(void 0!==e.equipments&&"object"===a(e.ship)){if(Array.isArray(e.ship.isID)&&!e.ship.isID.every(function(e){return p(e).canEquip(t)}))return!1;if("number"==typeof e.ship.isID&&!p(e.ship.isID).canEquip(t))return!1;if(Array.isArray(e.ship.isType)&&!e.ship.isType.every(function(e){return h(e).equipable.includes(t.type)}))return!1;if("number"==typeof e.ship.isType&&!h(e.ship.isType).equipable.includes(t.type))return!1;if(Array.isArray(e.ship.isClass)&&!e.ship.isClass.every(function(e){return h(c(e).ship_type_id).equipable.includes(t.type)}))return!1;if("number"==typeof e.ship.isClass&&!h(c(e.ship.isClass).ship_type_id).equipable.includes(t.type))return!1}return Array.isArray(e.equipments)?e.equipments.some(function(e){return l(t,10,7,e)}):"object"===a(e.equipments)&&Object.keys(e.equipments).filter(function(e){return/^has/.test(e)}).some(function(r){return l(t,function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}({},r.replace(/^has/,"is"),e.equipments[r]))})})}},{key:"_icon",get:function(){return"assets/images/itemicon/"+this.getIconId()+".png"}}]),r}(m),y=function(t){function r(e){return o(this,r),n(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e))}return s(r,t),i(r,[{key:"getName",value:function(e,t){e=e||"",t=t||d.lang;var r=this.getSuffix(t);return(this.name[t]||this.name.ja_jp)+(r?(!0===e?d.joint:e)+r:"")}},{key:"getNameNoSuffix",value:function(e){return e=e||d.lang,this.name[e]||this.name.ja_jp}},{key:"getSuffix",value:function(e){return e=e||d.lang,this.name.suffix&&(d.db.ship_namesuffix[this.name.suffix][e]||d.db.ship_namesuffix[this.name.suffix].ja_jp)||""}},{key:"getType",value:function(e){return e=e||d.lang,this.type?d.db.ship_types[this.type].name[e]||d.db.ship_types[this.type].name.ja_jp||"":null}},{key:"getSeriesData",value:function(){return this.series?d.db.ship_series[this.series].ships:[{id:this.id}]}},{key:"getPic",value:function(e,t){e=parseInt(e||0);for(var r=this.getSeriesData(),a=this.illust_version?"?version="+this.illust_version:"",i=function(e,r){return"undefined"!=typeof node&&node&&node.path&&d.path.pics.ships?node.path.join(d.getFolderGroup(d.path.pics.ships,e),e+"/"+r+"."+(t||"webp")):d.path.pics.ships?d.path.pics.ships+e+"/"+r+"."+(t||"png")+a:"/"+e+"/"+r+"."+(t||"png")+a},n=0;n<r.length;n++)if(r[n].id==this.id)switch(e){case 0:case 1:case 2:case 3:case 12:case 13:case 14:return i(this.id,e);default:return r[n].illust_delete?i(r[n-1].id,e):i(this.id,e)}}},{key:"getSpeed",value:function(){return d.statSpeed[parseInt(this.stat.speed)]}},{key:"getSpeedRule",value:function(){return this.speed_rule?this.speed_rule:this.class?d.db.ship_classes[this.class].speed_rule:null}},{key:"getRange",value:function(){return d.statRange[parseInt(this.stat.range)]}},{key:"getEquipmentTypes",value:function(e){var t=this.additional_disable_item_types||[],r=d.db.ship_types[this.type],a=r.equipable.concat(this.additional_item_types||[]);return"number"==typeof e&&Array.isArray(r.additional_item_types_by_slot)&&Array.isArray(r.additional_item_types_by_slot[e])&&r.additional_item_types_by_slot[e].forEach(function(e){return a.push(e)}),a.filter(function(e){return t.indexOf(e)<0}).sort(function(e,t){return e-t})}},{key:"getAttribute",value:function(e,t){(t=t||1)>r.lvlMax&&(t=r.lvlMax);var a=void 0;switch(e){case"hp":return a=this.stat.hp,t>99&&(a=this.stat.hp>=90?this.stat.hp+9:this.stat.hp>=70?this.stat.hp+8:this.stat.hp>=50?this.stat.hp+7:this.stat.hp>=40?this.stat.hp+6:this.stat.hp>=30?this.stat.hp+5:this.stat.hp+4)>this.stat.hp_max&&(a=this.stat.hp_max),a;case"speed":return d.getStatSpeed(this.stat.speed);case"range":return d.getStatRange(this.stat.range);case"luck":return t>99?this.stat.luck+3:this.stat.luck;case"fuel":case"ammo":return t>99?Math.floor(.85*this.consum[e]):this.consum[e];case"aa":case"armor":case"fire":case"torpedo":return this.stat[e+"_max"]||this.stat[e];default:return function(e,t,r){return e=e||1,t=parseFloat(t),r=parseFloat(r)||t,t<0||r<0?-1:t==r?r:Math.floor(t+(r-t)*e/99)}(t,this.stat[e],this.stat[e+"_max"])}}},{key:"getRel",value:function(e){if(e){if(!this.rels[e]&&this.remodel&&this.remodel.prev)for(var t=d.db.ships[this.remodel.prev];t;){if(t.rels&&t.rels[e])return t.rels[e];t=t.remodel&&t.remodel.prev?d.db.ships[t.remodel.prev]:null}return this.rels[e]}return this.rels}},{key:"getCV",value:function(e){var t=this.getRel("cv");if(t)return d.db.entities[t].getName(e||d.lang)}},{key:"getIllustrator",value:function(e){var t=this.getRel("illustrator");if(t)return d.db.entities[t].getName(e||d.lang)}},{key:"getMinLv",value:function(){var e=this,t=this._series,r=void 0;return t.some(function(a,i){return e.id==a.id&&(r=i?t[i-1].next_lvl:1),r}),r}},{key:"getNavy",value:function(){return this.navy?this.navy:this.class&&d.db.ship_classes[this.class].navy||"ijn"}},{key:"getCapability",value:function(e){return e?this.capabilities?this.capabilities[e]:void 0:this.capabilities||{}}},{key:"getStatExtraMax",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;switch(e.toLowerCase()){case"hp":var r=this.getAttribute(e,t),a=this.stat.hp_max;return Math.max(0,Math.min(2,a-r));case"asw":return this.stat.asw?9:!!R.shipType.LightCruisers.concat(R.shipType.Destroyers).includes(this.type)&&9;default:return!1}}},{key:"canEquip",value:function(e,t){var r=this;if(Array.isArray(e))return e.every(function(e){return r.canEquip(e,t)});if("string"==typeof e){if(Array.isArray(f[e]))return f[e].some(function(e){return r.canEquip(e,t)});if("number"==typeof f[e])return this.canEquip(f[e],t);if(Array.isArray(f[e+"s"]))return f[e+"s"].some(function(e){return r.canEquip(e,t)})}return"object"===(void 0===e?"undefined":a(e))&&void 0!==e.type&&(e=e.type),!isNaN(e)&&this.getEquipmentTypes(t).includes(parseInt(e))}},{key:"getBonuses",value:function(){var t=this;return e.filter(function(e){return u(t,e.ship)})}},{key:"_type",get:function(){return this.getType()}},{key:"_series",get:function(){return this.getSeriesData()}},{key:"_pics",get:function(){for(var e=[],t=0;t<15;t++)e.push(this.getPic(t));return e}},{key:"_speed",get:function(){return this.getSpeed()}},{key:"_speedRule",get:function(){return this.getSpeedRule()}},{key:"_range",get:function(){return this.getRange()}},{key:"_cv",get:function(){return this.getCV()}},{key:"_illustrator",get:function(){return this.getIllustrator()}},{key:"_minLv",get:function(){return this.getMinLv()}},{key:"_navy",get:function(){return this.getNavy()}}]),r}(m);y.lvlMax=d.maxShipLv;var v=function(e){function t(e){return o(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return s(t,e),t}(m);d.dbLoad=function(e){return"string"==typeof e?d.dbLoad({type:e}):e.type||e.url?$.ajax({url:e.url||d.path.db+"/"+e.type+".json",dataType:"text",success:function(t){var r=[];e.beforeProcess&&(r=e.beforeProcess(t)),void 0===d.db[e.type]&&(d.db[e.type]={}),r.forEach(function(t){if(t){var r=JSON.parse(t);switch(e.type){case"ships":d.db[e.type][r.id]=new y(r);break;case"items":d.db[e.type][r.id]=new g(r);break;case"entities":d.db[e.type][r.id]=new b(r);break;default:d.db[e.type][r.id]=r}}}),e.success&&e.success(t)},complete:function(t,r){e.complete&&e.complete(t,r)}}):null};var S=function(e){return e instanceof y?e:d.db.ships?d.db.ships[e]:{}},C=function(e){return e instanceof g?e:d.db.equipments?d.db.equipments[e]:d.db.items[e]},A=function(e){var t=[];return e.forEach(function(e,r){t[r>=4?r+1:r]=e}),t[4]=0,t},R={equipmentType:{SmallCaliber:1,SmallCaliberHigh:2,SmallCaliberAA:3,MediumCaliber:4,LargeCaliber:5,SuperCaliber:6,SecondaryGun:7,SecondaryGunHigh:8,SecondaryGunAA:9,APShell:11,Torpedo:12,SubmarineTorpedo:13,MidgetSubmarine:14,ReconSeaplane:15,ReconSeaplaneNight:16,SeaplaneBomber:17,CarrierFighter:18,TorpedoBomber:19,DiveBomber:20,CarrierRecon:21,Autogyro:22,AntiSubPatrol:23,SmallRadar:24,LargeRadar:25,DepthCharge:26,Sonar:27,LargeSonar:28,AAGun:29,AAGunConcentrated:30,AAFireDirector:31,AviationPersonnel:36,SurfaceShipPersonnel:37,LandingCraft:38,Searchlight:39,CommandFacility:45,LargeFlyingBoat:45,SearchlightLarge:46,SuparRadar:47,CarrierRecon2:50,SeaplaneFighter:51,AmphibiousCraft:52,LandBasedAttacker:53,Interceptor:54,JetBomberFighter:55,JetBomberFighter2:56,TransportMaterial:57,SubmarineEquipment:58,LandBasedFighter:59,CarrierFighterNight:60,TorpedoBomberNight:61,LandBasedAntiSubPatrol:62},shipType:{Carriers:[9,10,11,30,32],LightCruisers:[2,3,21,28],Destroyers:[1,19],Submarines:[13,14]},calcByShip:{},calcByFleet:{},calcByField:{},calc:{}},_=R.equipmentType;return _.MainGuns=[_.SmallCaliber,_.SmallCaliberHigh,_.SmallCaliberAA,_.MediumCaliber,_.LargeCaliber,_.SuperCaliber],_.SmallCalibers=[_.SmallCaliber,_.SmallCaliberHigh,_.SmallCaliberAA],_.MediumCalibers=[_.MediumCaliber],_.LargeCalibers=[_.LargeCaliber,_.SuperCaliber],_.SecondaryGuns=[_.SecondaryGun,_.SecondaryGunHigh,_.SecondaryGunAA],_.APShells=[_.APShell],_.Torpedos=[_.Torpedo,_.SubmarineTorpedo],_.Seaplanes=[_.ReconSeaplane,_.ReconSeaplaneNight,_.SeaplaneBomber,_.SeaplaneFighter],_.Fighters=[_.SeaplaneBomber,_.CarrierFighter,_.CarrierFighterNight,_.TorpedoBomber,_.TorpedoBomberNight,_.DiveBomber,_.SeaplaneFighter,_.LandBasedAttacker,_.Interceptor,_.JetBomberFighter,_.JetBomberFighter2,_.LandBasedFighter],_.Interceptors=[_.Interceptor,_.LandBasedFighter],_.Recons=[_.ReconSeaplane,_.ReconSeaplaneNight,_.CarrierRecon,_.CarrierRecon2,_.LargeFlyingBoat],_.ReconSeaplanes=[_.ReconSeaplane,_.ReconSeaplaneNight],_.SeaplaneRecons=[_.ReconSeaplane,_.ReconSeaplaneNight,_.LargeFlyingBoat],_.SeaplaneBombers=[_.SeaplaneBomber,_.SeaplaneFighter],_.SeaplaneFighters=[_.SeaplaneFighter],_.CarrierFighters=[_.CarrierFighter,_.CarrierFighterNight],_.CarrierRecons=[_.CarrierRecon,_.CarrierRecon2],_.CarrierBased=[_.CarrierFighter,_.CarrierFighterNight,_.TorpedoBomber,_.TorpedoBomberNight,_.DiveBomber,_.CarrierRecon,_.CarrierRecon2,_.JetBomberFighter,_.JetBomberFighter2],_.LandBased=[_.LandBasedAttacker,_.Interceptor,_.JetBomberFighter,_.JetBomberFighter2,_.LandBasedFighter,_.LandBasedAntiSubPatrol],_.TorpedoBombers=[_.TorpedoBomber,_.TorpedoBomberNight],_.DiveBombers=[_.DiveBomber],_.JetBomberFighters=[_.JetBomberFighter,_.JetBomberFighter2],_.Autogyros=[_.Autogyro],_.AntiSubPatrols=[_.AntiSubPatrol,_.LandBasedAntiSubPatrol],_.Aircrafts=[],[].concat(_.Seaplanes).concat(_.Recons).concat(_.CarrierBased).concat(_.Autogyros).concat(_.AntiSubPatrols).concat(_.LandBased).forEach(function(e){_.Aircrafts.indexOf(e)<0&&_.Aircrafts.push(e)}),_.Radars=[_.SmallRadar,_.LargeRadar,_.SuparRadar],_.SmallRadars=[_.SmallRadar],_.LargeRadars=[_.LargeRadar,_.SuparRadar],_.AntiSubmarines=[_.DepthCharge,_.Sonar,_.LargeSonar],_.DepthCharges=[_.DepthCharge],_.Sonars=[_.Sonar,_.LargeSonar],_.AAGuns=[_.AAGun,_.AAGunConcentrated],_.AAFireDirectors=[_.AAFireDirector],_.Searchlights=[_.Searchlight,_.SearchlightLarge],_.AviationPersonnels=[_.AviationPersonnel],_.SurfaceShipPersonnels=[_.SurfaceShipPersonnel],_.LandingCrafts=[_.LandingCraft,_.AmphibiousCraft],_.AmphibiousCrafts=[_.AmphibiousCraft],_.isInterceptor=function(e){return(!(e=C(e)).type_ingame||47!=e.type_ingame[2])&&_.Interceptors.indexOf(e.type)>-1},R.starMultiper={SmallCalibers:{shelling:1,night:1},MediumCalibers:{shelling:1,night:1},LargeCalibers:{shelling:1.5,night:1},SecondaryGuns:{shelling:1,night:1,hit:1},APShells:{shelling:1,night:1},AAFireDirectors:{shelling:1,night:1},Searchlights:{shelling:1,night:1},AAGuns:{shelling:1,torpedo:1.2},Torpedos:{torpedo:1.2,night:1},DepthCharges:{shelling:.75,antisub:1},Sonars:{shelling:.75,antisub:1},SmallRadars:{los:1.25},LargeRadars:{los:1.4},Seaplanes:{},ReconSeaplanes:{los:1.2},SeaplaneFighters:{fighter:.2},SeaplaneBomber:{los:1.15},CarrierFighters:{fighter:.2},DiveBombers:{fighter:.25,night:1},CarrierRecons:{los:1.2},LandingCrafts:{shelling:1,night:1},Interceptors:{fighter:.2},_10:{shelling:["multiplication",.2],night:1},_66:{shelling:["multiplication",.2],night:1},_220:{shelling:["multiplication",.2],night:1},_275:{shelling:["multiplication",.2],night:1},_12:{shelling:["multiplication",.3],night:["multiplication",.3]},_234:{shelling:["multiplication",.3],night:["multiplication",.3]}},R.getStarMultiplier=function(e,t){if(!R.starMultiper._init){var r=function(e){_[e]&&_[e].forEach?_[e].forEach(function(t){R.starMultiper[t]=R.starMultiper[e]}):"number"==typeof _[e]&&(R.starMultiper[_[e]]=R.starMultiper[e])};for(var a in R.starMultiper)r(a);R.starMultiper._init=!0}var i=R.starMultiper[e]||{};return t?i[t]||0:i},R.getStarBonus=function(e,t,r){e=C(e);var a=Object.assign({},R.getStarMultiplier(e.type),R.starMultiper["_"+e.id])[t],i=void 0===a?0:a,n="sqrt";switch(Array.isArray(i)&&(n=i[0],i=i[1]),n){case"sqrt":return i*Math.sqrt(r);case"multiplication":case"multiple":return i*r}},R.getFighterPowerRankMultiper=function(e,t){e=C(e);var r=[],a={};r[0]=[0,9],r[1]=[10,24],r[2]=[25,39],r[3]=[40,54],r[4]=[55,69],r[5]=[70,84],r[6]=[85,99],r[7]=[100,120],a.CarrierFighter=[0,0,2,5,9,14,14,22],a.SeaplaneBomber=[0,0,1,1,1,3,3,6];var i=r[t],n=0;switch(e.type){case _.CarrierFighter:case _.CarrierFighterNight:case _.Interceptor:case _.SeaplaneFighter:case _.LandBasedFighter:n=a.CarrierFighter[t];break;case _.SeaplaneBomber:n=a.SeaplaneBomber[t]}return{min:Math.sqrt(i[0]/10)+n,max:Math.sqrt(i[1]/10)+n}},R.calculate=function(e,r,a,i,n,s){if(!e||!r)return 0;r instanceof y||(r=d.db.ships[r]);var o=0,u={main:0,secondary:0,torpedo:0,torpedoLateModel:0,seaplane:0,apshell:0,radar:0,radarAA:0,radarSurface:0,submarineEquipment:0,carrierFighterNight:0,torpedoBomberNight:0,aviationPersonnelNight:0,surfaceShipPersonnel:0},l=A(r.slot),p=0;a=a.map(function(e){return e?e instanceof g?e:d.db.equipments?d.db.equipments[e]:d.db.items[e]:null})||[],i=i||[],n=n||[],s=s||{},a.forEach(function(e){e&&(_.MainGuns.indexOf(e.type)>-1?u.main+=1:_.SecondaryGuns.indexOf(e.type)>-1?u.secondary+=1:_.Torpedos.indexOf(e.type)>-1?(u.torpedo+=1,e.name.ja_jp.indexOf("後期型")>-1&&(u.torpedoLateModel+=1)):_.Seaplanes.indexOf(e.type)>-1?u.seaplane+=1:_.APShells.indexOf(e.type)>-1?u.apshell+=1:_.Radars.indexOf(e.type)>-1?(u.radar+=1,e.stat.aa&&(u.radarAA+=1),e.stat.hit&&e.stat.hit>=3&&(u.radarSurface+=1)):_.SubmarineEquipment==e.type?u.submarineEquipment+=1:_.AviationPersonnels.indexOf(e.type)>-1?e.name.ja_jp.indexOf("夜間")>-1&&(u.aviationPersonnelNight+=1):_.SurfaceShipPersonnels.indexOf(e.type)>-1&&(u.surfaceShipPersonnel+=1),e.type_ingame&&(45===e.type_ingame[3]?u.carrierFighterNight+=1:46===e.type_ingame[3]&&(u.torpedoBomberNight+=1)))});var c=t(r,a,i,n);switch(e){case"fighterPower":return p=0,l.map(function(e,t){if(a[t]&&_.Fighters.indexOf(a[t].type)>-1&&e){if(p=Math.sqrt(e)*(a[t].getStat("aa",r)||0),_.CarrierFighters.includes(a[t].type))switch(n[t]){case 1:case"1":p+=1;break;case 2:case"2":p+=4;break;case 3:case"3":p+=6;break;case 4:case"4":p+=11;break;case 5:case"5":p+=16;break;case 6:case"6":p+=17;break;case 7:case"7":p+=25}else if(-1==_.Recons.indexOf(a[t].type)){var i=a[t].type==_.SeaplaneBomber?9:3;p+=1==n[t]?1:i/6*(n[t]-1)}o+=Math.floor(p)}}),o;case"fighterPower_v2":return R.calcByShip.fighterPower_v2(r,a,i,n);case"shelling":case"shellingDamage":return R.shipType.Submarines.indexOf(r.type)>-1?"-":(o=R.calcByShip.shellingPower(r,a,i,n,{},c))&&o>-1?Math.floor(o):"-";case"torpedo":case"torpedoDamage":return(o=function(e){return R.calcByShip.torpedoPower(r,a,i,n,e,c)}())&&o>-1?Math.floor(o):"-";case"nightBattle":var h=R.calcByShip.nightPower(r,a,i,n,{},u,c);return h.damage<=0?"-":h.value;case"addHit":return l.map(function(e,t){a[t]&&(o+=a[t].getStat("hit",r)||0)}),(o+=c.hit||0)>=0?"+"+o:o;case"addArmor":return l.map(function(e,t){a[t]&&(o+=a[t].getStat("armor",r)||0)}),o+(c.armor||0);case"addEvasion":return l.map(function(e,t){a[t]&&(o+=a[t].getStat("evasion",r)||0)}),o+(c.evasion||0);case"losPower":return R.calcByShip.losPower(r,a,i,n,s);default:return R.calcByShip[e](r,a,i,n,s,c)}},R.shellingDamage=function(e,t,r,a){return this.calculate("shellingDamage",e,t,r,a)},R.torpedoDamage=function(e,t,r,a){return this.calculate("torpedoDamage",e,t,r,a)},R.fighterPower=function(e,t,r,a){return this.calculate("fighterPower",e,t,r,a)},R.fighterPower_v2=function(e,t,r,a){return this.calculate("fighterPower_v2",e,t,r,a)},R.nightBattle=function(e,t,r,a){return this.calculate("nightBattle",e,t,r,a)},R.addHit=function(e,t,r,a){return this.calculate("addHit",e,t,r,a)},R.addArmor=function(e,t,r,a){return this.calculate("addArmor",e,t,r,a)},R.addEvasion=function(e,t,r,a){return this.calculate("addEvasion",e,t,r,a)},R.losPower=function(e,t,r,a,i){return this.calculate("losPower",e,t,r,a,i)},R.calc.losPower=function(e){var t=["(Intercept)","DiveBombers","TorpedoBombers","CarrierRecons","SeaplaneRecons","SeaplaneBombers","SmallRadars","LargeRadars","Searchlights","statLos","hqLv"],r={"(Intercept)":0,DiveBombers:1.03745043134563,TorpedoBombers:1.3679056374142,CarrierRecons:1.65940512636315,SeaplaneRecons:2,SeaplaneBombers:1.77886368594467,SmallRadars:1.0045778494921,LargeRadars:.990738063979571,Searchlights:.906965144360512,statLos:1.6841895400986,hqLv:-.614246711531445},a={"(Intercept)":4.66445565766347,DiveBombers:.0965028505325845,TorpedoBombers:.108636184978525,CarrierRecons:.0976055279516298,SeaplaneRecons:.0866229392463539,SeaplaneBombers:.0917722496848294,SmallRadars:.0492773648320346,LargeRadars:.0491221486053861,Searchlights:.0658283797225724,statLos:.0781594211213618,hqLv:.0369222352426548},i={"(Intercept)":{"(Intercept)":1,DiveBombers:-.147020064768061,TorpedoBombers:-.379236131621529,CarrierRecons:-.572858669501918,SeaplaneRecons:-.733913857017495,SeaplaneBombers:-.642621825152428,SmallRadars:-.674829588068364,LargeRadars:-.707418111752863,Searchlights:-.502304601556193,statLos:-.737374218573832,hqLv:-.05071933950163},DiveBombers:{"(Intercept)":-.147020064768061,DiveBombers:1,TorpedoBombers:.288506347076736,CarrierRecons:.365820372770994,SeaplaneRecons:.425744409856409,SeaplaneBombers:.417783698791503,SmallRadars:.409046013184429,LargeRadars:.413855653833994,Searchlights:.308730607324667,statLos:.317984916914851,hqLv:-.386740224500626},TorpedoBombers:{"(Intercept)":-.379236131621529,DiveBombers:.288506347076736,TorpedoBombers:1,CarrierRecons:.482215071254241,SeaplaneRecons:.584455876852325,SeaplaneBombers:.558515133495825,SmallRadars:.547260012897553,LargeRadars:.560437619378443,Searchlights:.437934879351188,statLos:.533934507932748,hqLv:-.405349979885748},CarrierRecons:{"(Intercept)":-.572858669501918,DiveBombers:.365820372770994,TorpedoBombers:.482215071254241,CarrierRecons:1,SeaplaneRecons:.804494553748065,SeaplaneBombers:.75671307047535,SmallRadars:.748420581669228,LargeRadars:.767980338133817,Searchlights:.589651513349878,statLos:.743851348255527,hqLv:-.503544281376776},SeaplaneRecons:{"(Intercept)":-.733913857017495,DiveBombers:.425744409856409,TorpedoBombers:.584455876852325,CarrierRecons:.804494553748065,SeaplaneRecons:1,SeaplaneBombers:.932444440578382,SmallRadars:.923988080549326,LargeRadars:.94904944359066,Searchlights:.727912987329348,statLos:.944434077970518,hqLv:-.614921413821462},SeaplaneBombers:{"(Intercept)":-.642621825152428,DiveBombers:.417783698791503,TorpedoBombers:.558515133495825,CarrierRecons:.75671307047535,SeaplaneRecons:.932444440578382,SeaplaneBombers:1,SmallRadars:.864289865445084,LargeRadars:.886872388674911,Searchlights:.68310647756898,statLos:.88122333327317,hqLv:-.624797255805045},SmallRadars:{"(Intercept)":-.674829588068364,DiveBombers:.409046013184429,TorpedoBombers:.547260012897553,CarrierRecons:.748420581669228,SeaplaneRecons:.923988080549326,SeaplaneBombers:.864289865445084,SmallRadars:1,LargeRadars:.872011318623459,Searchlights:.671926570242336,statLos:.857213501657084,hqLv:-.560018086758868},LargeRadars:{"(Intercept)":-.707418111752863,DiveBombers:.413855653833994,TorpedoBombers:.560437619378443,CarrierRecons:.767980338133817,SeaplaneRecons:.94904944359066,SeaplaneBombers:.886872388674911,SmallRadars:.872011318623459,LargeRadars:1,Searchlights:.690102027588321,statLos:.883771367337743,hqLv:-.561336967269448},Searchlights:{"(Intercept)":-.502304601556193,DiveBombers:.308730607324667,TorpedoBombers:.437934879351188,CarrierRecons:.589651513349878,SeaplaneRecons:.727912987329348,SeaplaneBombers:.68310647756898,SmallRadars:.671926570242336,LargeRadars:.690102027588321,Searchlights:1,statLos:.723228553177704,hqLv:-.518427865593732},statLos:{"(Intercept)":-.737374218573832,DiveBombers:.317984916914851,TorpedoBombers:.533934507932748,CarrierRecons:.743851348255527,SeaplaneRecons:.944434077970518,SeaplaneBombers:.88122333327317,SmallRadars:.857213501657084,LargeRadars:.883771367337743,Searchlights:.723228553177704,statLos:1,hqLv:-.620804120587684},hqLv:{"(Intercept)":-.05071933950163,DiveBombers:-.386740224500626,TorpedoBombers:-.405349979885748,CarrierRecons:-.503544281376776,SeaplaneRecons:-.614921413821462,SeaplaneBombers:-.624797255805045,SmallRadars:-.560018086758868,LargeRadars:-.561336967269448,Searchlights:-.518427865593732,statLos:-.620804120587684,hqLv:1}},n={DiveBombers:0,TorpedoBombers:0,CarrierRecons:0,SeaplaneRecons:0,SeaplaneBombers:0,SmallRadars:0,LargeRadars:0,Searchlights:0,statLos:1,hqLv:1};for(var s in e)n[s]=e[s];return function(e){void 0===e["(Intercept)"]&&(e["(Intercept)"]=1),e.hqLv=5*Math.ceil(e.hqLv/5);var n={},s=0,o={},u=0;return t.forEach(function(t){var i=e[t]*r[t];n[t]=i,s+=i,o[t]=e[t]*a[t]}),t.forEach(function(e){t.forEach(function(t){u+=o[e]*o[t]*i[e][t]})}),{x_estimate:n,y_estimate:s,x_std_error:o,y_std_error:u}}(n)},R.calc.los33=function(e){if(e){var t=0,r=0,a={TorpedoBombers:.8,CarrierRecons:1,ReconSeaplane:1.2,ReconSeaplaneNight:1.2,SeaplaneBomber:1.1};return Object.defineProperty(a,"default",{value:.6,enumerable:!1,configurable:!1,writable:!1}),e.equipments.forEach(function(e){if(e.id){var r=C(e.id);if(r.stat.los){var i=a.default,n=e.star||0;for(var s in a)(Array.isArray(_[s])?_[s]:[_[s]]).indexOf(r.type)>-1&&(i=a[s]);t+=i*(r.stat.los+R.getStarBonus(r,"los",n))}}}),e.ships.forEach(function(e){var t=S(e.id),a=t.getAttribute("los",Math.max(e.lv||1,t.getMinLv()));r+=Math.sqrt(Math.max(a,1))}),t+r-Math.ceil(.4*e.hq)+2*(6-e.ships.length)}},R.calc.TP=function(e){var t=0,r=(e=e||{}).ship||{},a=e.equipment||{};for(var i in r){var n=0;switch(i){case 1:case"1":case 19:case"19":case"dd":n=5;break;case 2:case"2":case 28:case"28":case"cl":n=2;break;case 21:case"21":case"ct":n=6;break;case 5:case"5":case"cav":n=4;break;case 8:case"8":case"bbv":n=7;break;case 12:case"12":case 24:case"24":case"av":n=9.5;break;case 14:case"14":case"ssv":n=1;break;case 15:case"15":case"lha":n=12;break;case 29:case"29":case"ao":n=15;break;case 17:case"17":case"as":n=7}t+=n*(parseInt(r[i])||0)}for(var s in a){var o=0,u=parseInt(s),l=void 0;switch(u){case 145:case 150:o=1;break;case 75:o=5;break;case 68:case 193:case 166:o=8;break;case 167:o=2;break;default:switch((l=C(u)).type){case R.equipmentType.LandingCraft:l.name.ja_jp.indexOf("大発動艇")>-1&&(o=8)}}t+=o*(parseInt(a[s])||0)}return t},R.calc.fighterPower=function(e,t,r,a){if(!e)return[0,0];e=e instanceof g?e:d.db.equipments?d.db.equipments[e]:d.db.items[e],t=t||0,r=r||0,a=a||0;var i=[0,0];if(_.Fighters.indexOf(e.type)>-1&&t){var n=((e.stat.aa||0)+(_.isInterceptor(e)?1.5*e.stat.evasion:0)+a*R.getStarMultiplier(e.type,"fighter"))*Math.sqrt(t),s=R.getFighterPowerRankMultiper(e,r);i[0]+=Math.floor(n+s.min),i[1]+=Math.floor(n+s.max)}return i},R.calc.fighterPowerAA=function(e,t,r,a){if(!e)return[0,0];e=C(e),t=t||0,r=r||0,a=a||0;var i=[0,0];if(t){var n=((e.stat.aa||0)+(_.isInterceptor(e)?e.stat.evasion:0)+(_.isInterceptor(e)?2*e.stat.hit:0)+a*R.getStarMultiplier(e.type,"fighter"))*Math.sqrt(t),s=R.getFighterPowerRankMultiper(e,r,{isAA:!0});i[0]+=Math.floor(n+s.min),i[1]+=Math.floor(n+s.max)}return i},R.calcByShip.shellingPower=function(e,r,a,i,n,s){n=n||{},s=s||t(e,r,a,i);var o=0,u=!1,l=A(e.slot);if(R.shipType.Carriers.indexOf(e.type)>-1?u=!0:[33].includes(e.type)||r.some(function(e){if(e&&!u&&_.CarrierBased.indexOf(e.type)>-1)return u=!0,!0}),u&&!n.isNight){var p=0,c=0;return l.map(function(t,i){if(r[i]){var n=r[i];o+=1.5*n.getStat("fire",e)||0,_.TorpedoBombers.indexOf(n.type)>-1&&(p+=n.getStat("torpedo",e)||0),c+=n.getStat("bomb",e)||0,_.SecondaryGuns.indexOf(n.type)>-1&&(o+=Math.sqrt(1.5*(a[i]||0)))}}),p||c?o+=Math.floor(1.5*(Math.floor(1.3*c)+p+e.stat.fire_max+(s.fire||0)))+50:-1}o=e.stat.fire_max||0;var h={CLMainGunNaval:0,CLMainGunTwin:0,ItalianCAMainGun:0};l.map(function(t,i){if(r[i]){var s=r[i];o+=s.getStat("fire",e)||0,R.shipType.LightCruisers.indexOf(e.type)>-1&&(["14cm単装砲","15.2cm単装砲"].forEach(function(e){s.name.ja_jp.includes(e)&&(h.CLMainGunNaval+=1)}),["14cm連装砲","15.2cm連装砲"].forEach(function(e){s.name.ja_jp.includes(e)&&(h.CLMainGunTwin+=1)})),"rm"===e._navy&&s.name.ja_jp.includes("203mm/53")&&(h.ItalianCAMainGun+=1),a[i]&&!n.isNight&&(o+=R.getStarBonus(s,"shelling",a[i]))}});var f=0+2*Math.sqrt(h.CLMainGunTwin)+Math.sqrt(h.CLMainGunNaval)+Math.sqrt(h.ItalianCAMainGun)+(s.fire||0);return o+f},R.calcByShip.torpedoPower=function(e,r,a,i,n,s){n=n||{},s=s||t(e,r,a,i);var o=0,u=A(e.slot);return R.shipType.Carriers.indexOf(e.type)>-1&&!n.isNight?n.returnZero?0:-1:(o=(e.stat.torpedo_max||0)+(s.torpedo||0),u.map(function(t,i){if(r[i]){var s=r[i];o+=_.TorpedoBombers.indexOf(s.type)>-1&&!n.isNight?0:s.getStat("torpedo",e)||0,a[i]&&!n.isNight&&(o+=R.getStarBonus(s,"torpedo",a[i]))}}),o)},R.calcByShip.nightPower=function(e,r,a,i,n,s,o){n=n||{},o=o||t(e,r,a,i);var u={damage:0},l=0,p=A(e.slot);if((s.aviationPersonnelNight||e.getCapability("count_as_night_operation_aviation_personnel"))&&(s.carrierFighterNight>=1||s.torpedoBomberNight>=1)){p.forEach(function(e,t){r[t]&&a[t]&&(l+=R.getStarBonus(r[t],"night",a[t]))});var c=0,h=0,f=0,d=0,m=0,b=[],g=0,y=0;p.forEach(function(t,i){if(r[i]){var n=r[i],s=!1,o=!1;n.type_ingame&&(45===n.type_ingame[3]?(o=!0,s=!0):46===n.type_ingame[3]&&(o=!0,s=!0)),_.TorpedoBombers.indexOf(n.type)>-1?n.hasName("Swordfish","ja_jp")&&(o=!0,g++):_.DiveBombers.indexOf(n.type)>-1&&n.hasName("岩井","ja_jp")&&(o=!0,y++),s&&(c+=t),o&&(h+=n.getStat("fire",e),f+=n.getStat("torpedo",e),d+=Math.sqrt(t)*((3+1.5*(s?1:0))*(n.getStat("fire",e)+n.getStat("torpedo",e)+n.getStat("bomb",e)+n.getStat("asw",e))/10),a[i]&&(m+=R.getStarBonus(r[i],"night",a[i])))}});var v=g+y;s.carrierFighterNight>=2&&s.torpedoBomberNight>=1&&b.push(1.25),s.carrierFighterNight>=1&&s.torpedoBomberNight>=1&&b.push(1.2),(s.carrierFighterNight>=3||s.carrierFighterNight>=2&&v>=1||s.carrierFighterNight>=1&&s.torpedoBomberNight>=1&&v>=1||s.carrierFighterNight>=1&&s.torpedoBomberNight>=2||s.carrierFighterNight>=1&&v>=2)&&b.push(1.18),u.type="航空",u.hit=1,u.damage=Math.floor(e.stat.fire_max+(o.fire||0)+h+f+3*c+d+m),u.isMax=!0,b.length&&(u.cis=b.map(function(e){return[Math.floor(u.damage*e),1]}))}else if(e.getCapability("participate_night_battle_when_equip_swordfish"))u.damage+=e.stat.fire_max+(o.fire||0)+e.stat.torpedo_max+(o.torpedo||0),p.forEach(function(t,a){var i=r[a];r[a]&&_.TorpedoBombers.indexOf(i.type)>-1&&i.name.ja_jp.indexOf("Swordfish")>-1&&(u.damage+=i.getStat("fire",e)+i.getStat("torpedo",e))}),u.type="通常",u.damage=Math.floor(u.damage),u.hit=1;else{if(e.stat.fire+e.stat.torpedo<=0)return{damage:0};var S={};p.forEach(function(e,t){if(r[t]&&(a[t]&&(l+=R.getStarBonus(r[t],"night",a[t])),r[t])){var i=r[t];S[i.id]?S[i.id]++:S[i.id]=1}}),u.damage=R.calcByShip.shellingPower(e,r,a,i,{isNight:!0},o)+R.calcByShip.torpedoPower(e,r,a,i,{isNight:!0,returnZero:!0},o)+l+(o.nightExtra||0),R.shipType.Submarines.indexOf(e.type)>-1&&s.torpedoLateModel>=1&&s.submarineEquipment>=1?(u.type="雷击CI",u.damage=Math.floor(1.75*u.damage),u.hit=2):R.shipType.Submarines.indexOf(e.type)>-1&&s.torpedoLateModel>=2?(u.type="雷击CI",u.damage=Math.floor(1.6*u.damage),u.hit=2):s.torpedo>=2?(u.type="雷击CI",u.damage=Math.floor(1.5*u.damage),u.hit=2):s.main>=3?(u.type="炮击CI",u.damage=Math.floor(2*u.damage),u.hit=1):2==s.main&&s.secondary>=1?(u.type="炮击CI",u.damage=Math.floor(1.75*u.damage),u.hit=1):R.shipType.Destroyers.indexOf(e.type)>-1&&s.torpedo>=1&&s.radarSurface>=1&&s.surfaceShipPersonnel>=1?(u.type="电探CI",u.damage=Math.floor(1.25*u.damage),u.hit=1):R.shipType.Destroyers.indexOf(e.type)>-1&&s.torpedo>=1&&s.radarSurface>=1&&s.main>=1?(u.type="电雷CI",u.damage=S[267]?Math.floor(1.625*u.damage):Math.floor(1.3*u.damage),u.hit=1):s.main>=1&&1==s.torpedo?(u.type="炮雷CI",u.damage=Math.floor(1.3*u.damage),u.hit=2):2==s.main&&s.secondary<=0&&s.torpedo<=0||1==s.main&&s.secondary>=1&&s.torpedo<=0||0==s.main&&s.secondary>=2&&s.torpedo>=0?(u.type="连击",u.damage=Math.floor(1.2*u.damage),u.hit=2):(u.type="通常",u.damage=Math.floor(u.damage),u.hit=1)}var C=" ";if(u.isMax&&(C=" ≤ "),u.isMin&&(C=" ≥ "),u.value=""+u.type+C+u.damage,u.hit&&u.hit>1&&(u.value+=" x "+u.hit),Array.isArray(u.cis)&&u.cis.length)u.value+=" (CI"+C+u.cis.sort(function(e,t){return e[0]-t[0]}).map(function(e){return e[0]+(e[1]&&e[1]>1?" x "+e[1]:"")}).join(" 或 ")+")";else if(u.damage_ci){var D=u.hit_ci||u.hit||1;u.value+=" (CI"+C+u.damage_ci+")",D&&D>1&&(u.value+=" x "+D)}return u},R.calcByShip.fighterPower_v2=function(e,t,r,a){var i=[0,0];return A(e.slot).map(function(e,n){var s=R.calc.fighterPower(t[n],e,a[n]||0,r[n]||0);i[0]+=s[0],i[1]+=s[1]}),i},R.calcByShip.losPower=function(e,t,r,a,i){(i=i||{}).shipLv=i.shipLv||1,i.hqLv=i.hqLv||1,i.shipLv<0&&(i.shipLv=1),i.hqLv<0&&(i.hqLv=1);var n={DiveBombers:0,TorpedoBombers:0,CarrierRecons:0,SeaplaneRecons:0,SeaplaneBombers:0,SmallRadars:0,LargeRadars:0,Searchlights:0,statLos:Math.sqrt(e.getAttribute("los",i.shipLv)),hqLv:i.hqLv};return t.forEach(function(e){if(e)for(var t in n)_[t]&&_[t].push&&_[t].indexOf(e.type)>-1&&(n[t]+=e.stat.los)}),R.calc.losPower(n)},R.calcByShip.TP=function(e,t){if(!e||!t||!t.push)return 0;e=S(e);var r={ship:{},equipment:{}};return r.ship[e.type]=1,t.forEach(function(e){if(e){var t="number"==typeof e?e:C(e).id;r.equipment[t]||(r.equipment[t]=0),r.equipment[t]++}}),e.getCapability("count_as_landing_craft")&&(r.equipment[68]||(r.equipment[68]=0),r.equipment[68]++),R.calc.TP(r)},R.calcByShip.speed=function(e,t,r,i,n){if(!e)return"";if("object"===(void 0===r?"undefined":a(r))&&r.push)return R.calcByShip.speed(e,t,[],[],r);if("object"===(void 0===i?"undefined":a(i))&&i.push)return R.calcByShip.speed(e,t,r,[],i);e=S(e),t=t||[],n=n||{};var s=parseInt(e.stat.speed),o=function(e){return e=Math.min(20,e||s),n.returnNumber?e:d.statSpeed[e]},u={33:0,34:0,87:0},l=e._speedRule||"low-2",p=0;if(t.forEach(function(e){if(e){var t="number"==typeof e?e:C(e).id;void 0!==u[""+t]&&u[""+t]++}}),!u[33])return o();switch(l){case"low-1":p=.3*Math.min(u[34],1)+.7*u[87];break;case"low-2":case"high-3":(u[34]||u[87])&&(p=Math.min(1,u[34]/3+.5*u[87]));break;case"low-3":case"high-4":(u[34]||u[87])&&(s+=5);break;case"high-1":p=.5*u[34]+1*u[87];break;case"high-2":p=.5*u[34]+.5*u[87];break;case"low-4":p=.5}return p>0&&p<1?s+=5:p>=1&&p<1.5?s+=10:p>=1.5&&(s+=15),o()},R.calcByShip.fireRange=function(e,r,a,i,n,s){if(!e)return"-";r=r||[],n=n||{},s=s||t(e,r,a,i);var o=parseInt(e.stat.range);return r.forEach(function(e){e&&(o=Math.max(o,C(e).stat.range||0))}),isNaN(s.range)||(o+=parseInt(s.range)),d.statRange[Math.min(4,o)]},R.calcByFleet.los33=function(e,t){var r=[],a=[];return e.forEach(function(e){if(Array.isArray(e)){var t=e[0];if(t){var i=e[2],n=e[3],s=e[4];a.push({id:t,lv:e[1][0]}),i.forEach(function(e,t){r.push({id:e,star:n[t],rank:s[t]})})}}}),R.calc.los33({hq:t,equipments:r,ships:a})},R.calcByField.fighterPowerAA=function(e){var t=[0,0],r=1;function a(e){return r=Math.max(e,r)}return e.forEach(function(e){var r=C(e[0]||e.equipment||e.equipmentId),i=e[1]||e.star||0,n=e[2]||e.rank||0,s=e[3]||e.carry||0,o=R.calc.fighterPowerAA(r,s,n,i);switch(s||(s=R.equipmentType.Recons.indexOf(r.type)>-1?4:18),t[0]+=o[0],t[1]+=o[1],r.type){case _.CarrierRecon:case _.CarrierRecon2:r.stat.los<=7?a(1.2):r.stat.los>=9?a(1.3):a(1.25);break;case _.ReconSeaplane:case _.ReconSeaplaneNight:case _.LargeFlyingBoat:r.stat.los<=7?a(1.1):r.stat.los>=9?a(1.16):a(1.13)}}),t[0]=t[0]*r,t[1]=t[1]*r,t},R.getBonus=function(e,r,a,i,n){return t(e,r,a,i,n)},Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){var r;if(null==this)throw new TypeError('"this" is null or not defined');var a=Object(this),i=a.length>>>0;if(0===i)return-1;var n=+t||0;if(Math.abs(n)===1/0&&(n=0),n>=i)return-1;for(r=Math.max(n>=0?n:i-Math.abs(n),0);r<i;){if(r in a&&a[r]===e)return r;r++}return-1}),d.Entity=b,d.Equipment=g,d.Ship=y,d.Consumable=v,d.formula=R,d}()},function(e,t,r){"use strict";function a(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}e.exports=[].concat(a(r(11)),a(r(12)),a(r(13)),a(r(14)),a(r(15)),a(r(16)),a(r(17)),a(r(18)),a(r(19)),a(r(20)),a(r(21)),a(r(22)),a(r(23)),a(r(24)),a(r(25)),a(r(26)),a(r(27)),a(r(28)),a(r(29)),a(r(30)),a(r(31)),a(r(32)),a(r(33)),a(r(34)),a(r(35)),a(r(36)),a(r(37)),a(r(38)),a(r(39)),a(r(40)),a(r(41)),a(r(42)),a(r(43)),a(r(44)))},function(e,t,r){"use strict";e.exports=[{equipment:293,ship:{isClass:[92,94]},bonus:{fire:1,aa:1,evasion:2}},{equipment:293,ship:{isClass:[84,12]},bonus:{fire:2,aa:1,evasion:3}},{list:[293,"SurfaceRadar"],equipments:{hasID:[293],hasSurfaceRadar:!0},ship:{isClass:[92,94]},bonus:{fire:2,evasion:3,asw:1}},{list:[293,"SurfaceRadar"],equipments:{hasID:[293],hasSurfaceRadar:!0},ship:{isClass:[84,12]},bonus:{fire:2,torpedo:1,evasion:3}},{list:[293,174],equipments:[{isID:293},{isID:174}],ship:{isClass:[84,12]},bonus:{fire:2,torpedo:4}},{list:[293,174,174],equipments:[{isID:293},{isID:174},{isID:174}],ship:{isClass:[84,12]},bonus:{fire:1,torpedo:3}}]},function(e,t,r){"use strict";var a=r(0).CL_NagaraClass2ndRemodel;e.exports=[{equipment:229,ship:{isType:[31]},bonusImprove:{10:{fire:1,aa:1}}},{equipment:229,ship:{isClass:[84,12]},bonusImprove:{10:{fire:1,aa:1}}},{equipment:229,ship:{isID:a},bonusImprove:{10:{fire:2,aa:3}}},{list:[{id:229,star:10},"SurfaceRadar"],equipments:[{isID:229,improvement:10},{isSurfaceRadar:!0}],ship:{isType:[31]},bonus:{fire:1,evasion:4}},{list:[{id:229,star:10},"SurfaceRadar"],equipments:[{isID:229,improvement:10},{isSurfaceRadar:!0}],ship:{isClass:[84,12]},bonus:{fire:2,evasion:3}},{list:[{id:229,star:10},"SurfaceRadar"],equipments:[{isID:229,improvement:10},{isSurfaceRadar:!0}],ship:{isID:a},bonus:{fire:3,evasion:2}}]},function(e,t,r){"use strict";var a=r(1).group_DD_Tokugata;e.exports=[{equipment:294,ship:{isClass:a},bonus:{fire:1}},{list:[294,"SurfaceRadar"],equipments:{hasID:[294],hasSurfaceRadar:!0},ship:{isClass:a},bonus:{fire:3,torpedo:1,evasion:2}},{list:[294,[125,285]],equipments:[{isID:294},{isID:[125,285]}],ship:{isClass:a},bonus:{fire:1,torpedo:3}},{list:[294,[125,285],[125,285]],equipments:[{isID:294},{isID:[125,285]},{isID:[125,285]}],ship:{isClass:a},bonus:{torpedo:2}}]},function(e,t,r){"use strict";var a=r(1),i=a.DD_Tokugata,n=a.DD_Hatsuharu;e.exports=[{equipment:295,ship:{isClass:i},bonus:{fire:2,aa:2}},{equipment:295,ship:{isClass:[n]},bonus:{fire:2}},{list:[295,"SurfaceRadar"],equipments:{hasID:[295],hasSurfaceRadar:!0},ship:{isClass:i},bonus:{fire:3,torpedo:1,evasion:2}},{list:[295,"AARadar"],equipments:{hasID:[295],hasAARadar:!0},ship:{isClass:i},bonus:{aa:6}},{list:[295,285],equipments:[{isID:295},{isID:285}],ship:{isClass:i},bonus:{fire:1,torpedo:4}},{list:[295,285,285],equipments:[{isID:295},{isID:285},{isID:285}],ship:{isClass:i},bonus:{fire:1,torpedo:2}}]},function(e,t,r){"use strict";var a=r(0),i=a.DD_AyanamiClassRemodelAll,n=a.DD_AkatsukiClassRemodelAll,s=a.DD_HatsuharuClassRemodelAll;e.exports=[{equipment:63,ship:{isID:i.concat(n).concat(s)},bonus:{aa:1}},{equipment:63,ship:{isID:[242,497,498]},bonus:{evasion:1}},{equipment:63,ship:{isID:[145]},bonus:{fire:2}},{equipment:63,ship:{isID:[469]},bonus:{evasion:2}},{equipment:63,ship:{isID:[144]},bonus:{fire:1,torpedo:1,aa:1,evasion:2}}]},function(e,t,r){"use strict";var a=r(0).DD_ShiratsuyuClass2ndRemodel,i=r(1),n=i.DD_Ayanami,s=i.DD_Akatsuki,o=i.DD_Hatsuharu,u=i.DD_Shiratsuyu,l=[n,s],p=[n,s,u],c=[n,s,o];e.exports=[{equipment:296,ship:{isClass:p,isNotID:a},bonus:{fire:1}},{equipment:296,ship:{isClass:[o]},bonus:{fire:1,evasion:1}},{equipment:296,ship:{isID:[497]},bonus:{fire:2,evasion:2}},{equipment:296,ship:{isID:[145]},bonus:{fire:2,aa:1,evasion:2}},{equipment:296,ship:{isID:[498]},bonus:{fire:1,aa:1,evasion:2}},{equipment:296,ship:{isID:[144]},bonus:{fire:2,torpedo:1,evasion:1}},{equipment:296,ship:{isID:[469]},bonus:{fire:1,evasion:1}},{list:[296,"SurfaceRadar"],equipments:{hasID:[296],hasSurfaceRadar:!0},ship:{isClass:c},bonus:{fire:1,torpedo:2,evasion:2}},{list:[296,"SurfaceRadar"],equipments:{hasID:[296],hasSurfaceRadar:!0},ship:{isClass:[u]},bonus:{fire:1,torpedo:3,evasion:2}},{list:[296,"AARadar"],equipments:{hasID:[296],hasAARadar:!0},ship:{isClass:c},bonus:{aa:5}},{list:[296,"AARadar"],equipments:{hasID:[296],hasAARadar:!0},ship:{isClass:[u]},bonus:{aa:6}},{list:[296,285],equipments:[{isID:296},{isID:285}],ship:{isClass:l},bonus:{fire:1,torpedo:3}},{list:[296,286],equipments:[{isID:296},{isID:286}],ship:{isClass:[u]},bonus:{fire:1,torpedo:3}}]},function(e,t,r){"use strict";var a=r(0).DD_KagerouClass2ndRemodel,i=[145,228,557],n=a.concat(i);e.exports=[{equipment:266,ship:{isClass:[19,20,21],isNotID:n},bonus:{fire:1}},{equipment:266,ship:{isID:i},bonus:{fire:1,evasion:1}},{equipment:266,ship:{isID:a},bonusCount:{1:{fire:2},2:{fire:5},3:{fire:6}}},{list:[266,"SurfaceRadar"],equipments:{hasID:[266],hasSurfaceRadar:!0},ship:{isClass:[19,20]},bonus:{fire:1,torpedo:3,evasion:1}},{list:[266,"SurfaceRadar"],equipments:{hasID:[266],hasSurfaceRadar:!0},ship:{isClass:[21]},bonus:{fire:2,torpedo:3,evasion:1}}]},function(e,t,r){"use strict";var a=r(0),i=a.DD_KagerouClass2ndRemodel,n=a.DD_YuugumoClass2ndRemodel,s=a.DD_ShimakazeRemodel;e.exports=[{equipment:267,ship:{isClass:[21],isNotID:i},bonus:{fire:1,evasion:1}},{equipment:267,ship:{isClass:[22,24],isNotID:n},bonus:{fire:2,evasion:1}},{equipment:267,ship:{isID:i},bonusCount:{1:{fire:2,evasion:1},2:{fire:3,evasion:2},3:{fire:4,evasion:3}}},{equipment:267,ship:{isID:n},bonus:{fire:3,evasion:1}},{list:[267,"SurfaceRadar"],equipments:{hasID:[267],hasSurfaceRadar:!0},ship:{isID:s},bonus:{fire:1,torpedo:3,evasion:2}},{list:[267,"SurfaceRadar"],equipments:{hasID:[267],hasSurfaceRadar:!0},ship:{isClass:[22],isNotID:n},bonus:{fire:2,torpedo:3,evasion:1}},{list:[267,"SurfaceRadar"],equipments:{hasID:[267],hasSurfaceRadar:!0},ship:{isID:n},bonus:{fire:3,torpedo:4,evasion:3}}]},function(e,t,r){"use strict";e.exports=[{equipment:308,ship:{isType:[1,19],isNotClass:[112]},bonus:{fire:1}},{equipment:308,ship:{isClass:[112]},bonus:{fire:2,aa:1,evasion:1}}]},function(e,t,r){"use strict";var a=r(1),i=a.CL_Kuma,n=a.CL_Nagara,s=a.CL_Sendai,o=a.CL_Agano,u=a.CLT_Kuma,l=a.CL_Gotland,p=a.CLV_Gotland;e.exports=[{equipment:303,ship:{isClass:[i,n,s,o,u]},bonus:{fire:1,aa:1}},{equipment:303,ship:{isClass:[l,p]},bonus:{fire:1,aa:2,evasion:1}}]},function(e,t,r){"use strict";e.exports=[{equipment:104,ship:{isID:[149]},bonus:{fire:2}},{equipment:104,ship:{isID:[151]},bonus:{fire:2,aa:1,evasion:2}},{equipment:104,ship:{isID:[150,152]},bonus:{fire:1}}]},function(e,t,r){"use strict";e.exports=[{equipment:289,ship:{isID:[149]},bonus:{fire:2,aa:1}},{equipment:289,ship:{isID:[151]},bonus:{fire:2,aa:2,evasion:2}},{equipment:289,ship:{isID:[150,152]},bonus:{fire:1}},{list:[289,"SurfaceRadar"],equipments:{hasID:[289],hasSurfaceRadar:!0},ship:{isID:[149,151]},bonus:{fire:2,evasion:2}}]},function(e,t,r){"use strict";var a=r(0),i=a.BB_IseClassRemodel,n=a.BB_IseClass2ndRemodel,s=a.BB_IseClassRemodelAll,o=a.BB_FusouClass2ndRemodel;e.exports=[{equipment:290,ship:{isID:o},bonus:{fire:1}},{equipment:290,ship:{isID:i},bonus:{fire:2,aa:2,evasion:1}},{equipment:290,ship:{isID:n},bonus:{fire:3,aa:2,evasion:1}},{list:[290,"AARadar"],equipments:{hasID:[290],hasAARadar:!0},ship:{isID:s},bonus:{aa:2,evasion:3}}]},function(e,t,r){"use strict";var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},i=r(1),n=i.BB_QueenElizabeth,s={ship:{isClass:[i.BB_Nelson]},bonus:{fire:2,armor:1}},o={ship:{isClass:[n]},bonus:{fire:2,armor:1,evasion:-2}},u={ship:{isID:[149]},bonus:{fire:1,armor:1,evasion:-3}},l=[];[298,299,300].forEach(function(e){l.push(a({equipment:e},s)),l.push(a({equipment:e},o)),l.push(a({equipment:e},u))}),e.exports=l},function(e,t,r){"use strict";var a=r(0),i=a.DD_FubukiClass2ndRemodel,n=a.DD_AyanamiClass2ndRemodel,s=a.DD_AkatsukiClass2ndRemodel,o=a.DD_HatsuharuClass2ndRemodel,u=i.concat(n,s,o);e.exports=[{equipment:285,ship:{isID:u},bonusImprove:{0:{torpedo:2,evasion:1},10:{fire:1,torpedo:2,evasion:1}}}]},function(e,t,r){"use strict";var a=r(0).DD_KagerouClass2ndRemodel;e.exports=[{equipment:15,ship:{isID:a},bonusCount:{1:{torpedo:2},2:{torpedo:4}}}]},function(e,t,r){"use strict";var a=r(0),i=a.DD_ShiratsuyuClass2ndRemodel,n=a.DD_AsashioClass2ndRemodel,s=a.DD_KagerouClass2ndRemodel,o=a.DD_YuugumoClass2ndRemodel,u=i.concat(n,o);e.exports=[{equipment:286,ship:{isID:s},bonusImprove:{0:{torpedo:2,evasion:1},5:{torpedo:3,evasion:1},10:{fire:1,torpedo:3,evasion:1}}},{equipment:286,ship:{isID:u},bonusImprove:{0:{torpedo:2,evasion:1},10:{fire:1,torpedo:2,evasion:1}}}]},function(e,t,r){"use strict";e.exports=[{equipment:58,ship:{isID:[119,118,146,229]},bonus:{torpedo:1}}]},function(e,t,r){"use strict";var a=r(1).DD_Akizuki;e.exports=[{equipment:179,ship:{isClass:a},bonus:{torpedo:1}}]},function(e,t,r){"use strict";var a=r(0),i=a.BB_IseClass2ndRemodel,n=a.BB_IseClassRemodel_PLUS_FusouClass2ndRemodel;e.exports=[{equipment:79,ship:{isID:n},bonus:{fire:2}},{equipment:79,ship:{isID:i},bonus:{fire:3}}]},function(e,t,r){"use strict";var a=r(0),i=a.BB_IseClass2ndRemodel,n=a.BB_IseClassRemodel_PLUS_FusouClass2ndRemodel;e.exports=[{equipment:81,ship:{isID:n},bonus:{fire:2}},{equipment:81,ship:{isID:i},bonus:{fire:3}}]},function(e,t,r){"use strict";var a=r(0),i=a.BB_IseClassRemodel,n=a.BB_IseClass2ndRemodel,s=a.BB_FusouClass2ndRemodel;e.exports=[{equipment:237,ship:{isID:s},bonus:{fire:2}},{equipment:237,ship:{isID:i},bonus:{fire:3}},{equipment:237,ship:{isID:n},bonus:{fire:4}}]},function(e,t,r){"use strict";var a=r(0).BB_IseClass2ndRemodel;e.exports=[{equipment:24,ship:{isID:a},bonus:{fire:2}}]},function(e,t,r){"use strict";var a=r(0).BB_IseClass2ndRemodel;e.exports=[{equipment:111,ship:{isID:a},bonus:{fire:2}}]},function(e,t,r){"use strict";var a=r(0).BB_IseClass2ndRemodel;e.exports=[{equipment:57,ship:{isID:a},bonus:{fire:2}}]},function(e,t,r){"use strict";var a=r(0).BB_IseClass2ndRemodel;e.exports=[{equipment:100,ship:{isID:a},bonus:{fire:4}}]},function(e,t,r){"use strict";var a=r(0).BB_IseClass2ndRemodel;e.exports=[{equipment:291,ship:{isID:a},bonus:{fire:6,evasion:1}}]},function(e,t,r){"use strict";var a=r(0).BB_IseClass2ndRemodel;e.exports=[{equipment:292,ship:{isID:a},bonus:{fire:8,aa:1,evasion:2}}]},function(e,t,r){"use strict";var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},i={ship:{isID:[380,529,381,536]},bonus:{asw:1,evasion:1}};e.exports=[a({equipment:82},i),a({equipment:302},i)]},function(e,t,r){"use strict";var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},i={ship:{isID:[353,365]},bonus:{fire:1,evasion:1}},n={ship:{isID:[396]},bonus:{evasion:1}},s={ship:{isID:[380,529]},bonus:{asw:1,evasion:1}},o={ship:{isID:[381,536]},bonus:{asw:3,evasion:2}};e.exports=[a({equipment:305},i),a({equipment:305},n),a({equipment:305},s),a({equipment:305},o),a({equipment:306},i),a({equipment:306},n),a({equipment:306},s),a({equipment:306},o)]},function(e,t,r){"use strict";var a=r(0).BB_IseClass2ndRemodel;e.exports=[{equipment:61,ship:{isID:a},bonus:{fire:3,armor:1,evasion:2,range:"1"}}]},function(e,t,r){"use strict";e.exports=[{equipment:307,ship:{isClass:[82]},bonus:{fire:1,aa:1,evasion:1}}]},function(e,t,r){"use strict";var a=r(1),i=a.BB_QueenElizabeth,n=a.BB_Nelson,s=a.CV_ArkRoyal,o=a.DD_J;e.exports=[{equipment:301,ship:{isClass:[i,n,s,o]},bonus:{aa:2,evasion:1,armor:1}}]},function(e,t,r){"use strict";var a=r(0).CL_KumaClassRemodelAll;e.exports=[{equipment:268,ship:{isID:a},bonusCount:{1:{armor:2,evasion:7}}}]},function(e,t,r){"use strict";var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=r(46),s=r(5),o=r(49),u=r(3);e.exports=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],p=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],c=arguments[4];if("string"==typeof l)return e(t,r,void 0,void 0,l);if("string"==typeof p)return e(t,r,l,void 0,p);var h=n(t,r,l,p);t=h.ship,r=h.equipments,l=h.equipmentStars,p=h.equipmentRanks;var f={},d=u.filter(function(e){return s(t,e.ship)}),m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var t in e)void 0===f[t]?f[t]=e[t]:"number"==typeof f[t]?f[t]+=e[t]:f[t]=e[t]};return d.filter(function(e){return"number"==typeof e.equipment&&r.some(function(t){return t&&t.id&&t.id==e.equipment})}).forEach(function(e){var t={};if("object"===i(e.bonusImprove)){var n=Object.keys(e.bonusImprove).sort(function(e,t){return parseInt(t)-parseInt(e)});r.forEach(function(r,a){r&&r.id&&r.id==e.equipment&&n.some(function(r){if(l[a]>=r){for(var i in e.bonusImprove[r])void 0===t[i]?t[i]=e.bonusImprove[r][i]:"number"==typeof t[i]?t[i]+=e.bonusImprove[r][i]:t[i]=e.bonusImprove[r][i];return!0}return!1})})}else{var s=0;if(r.forEach(function(t){t&&t.id&&t.id==e.equipment&&s++}),"object"===i(e.bonusCount))Object.keys(e.bonusCount).sort(function(e,t){return parseInt(t)-parseInt(e)}).some(function(r){return s>=r&&(t=a({},e.bonusCount[r]),!0)});else if("object"===i(e.bonus))for(var o in t=a({},e.bonus))t[o]="number"==typeof t[o]?t[o]*s:parseInt(t[o])}m(t)}),d.filter(function(e){return"object"===i(e.equipments)&&o(r,l,p,e.equipments)}).forEach(function(e){m(e.bonus)}),"string"==typeof c?f[c]||0:f}},function(e,t,r){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i=r(2),n=r(4);e.exports=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return"number"!=typeof t&&"string"!=typeof t||(t=[t]),"number"!=typeof r&&"string"!=typeof r||(r=[r]),"number"!=typeof s&&"string"!=typeof s||(s=[s]),e=i(e),t=[].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(Array(Math.max(5,e.slot.length+1)))).map(function(r,a){if(e&&!(e.slot.length<=a&&a<4))return n(t[a])||void 0}),{ship:e,equipments:t,equipmentStars:t.map(function(e,i){return"object"===a(t[i])?Math.min(10,parseInt(r[i])||0):void 0}),equipmentRanks:t.map(function(e,r){return"object"===a(t[r])?Math.min(7,parseInt(s[r])||0):void 0})}}},function(e,t,r){"use strict";e.exports=function(e,t){return Array.isArray(e)?e.some(t):t(e)}},function(e,t,r){"use strict";e.exports=function(e,t){return Array.isArray(e)?e.every(t):t(e)}},function(e,t,r){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var n=r(7),s=["id","name","nameof","type"];e.exports=function e(t,r,o){var u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if("object"===(void 0===r?"undefined":a(r))&&!Array.isArray(r))return e(t,[],[],r);if("object"===(void 0===o?"undefined":a(o))&&!Array.isArray(o))return e(t,r,[],o);if(!Array.isArray(t))return e([t],r,o,u);if(Array.isArray(r)||(r=[r]),Array.isArray(o)||(o=[o]),Array.isArray(u)){var l=[].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(t));return u.every(function(e){return l.some(function(t,a){return!!n(t,r[a],o[a],e)&&(l.splice(a,1),!0)})})}var p=function(e){if(void 0===u[e])return"continue";if(!1===u[e]){if(!t.every(function(t,a){return n(t,r[a],o[a],i({},e.replace(/^has/,"is"),u[e]))}))return{v:!1}}else if(!0===u[e]){if(!t.some(function(t,a){return n(t,r[a],o[a],i({},e.replace(/^has/,"is"),u[e]))}))return{v:!1}}else if("has"===e.substr(0,3)&&s.includes(e.substr(3).toLowerCase())){if(Array.isArray(u[e])){if(!u[e].every(function(a){return t.some(function(t,s){return n(t,r[s],o[s],i({},e.replace(/^has/,"is"),a))})}))return{v:!1}}else if(!t.some(function(t,a){return n(t,r[a],o[a],i({},e.replace(/^has/,"is"),u[e]))}))return{v:!1}}else if("has"!==e.substr(0,3)||"object"!==a(u[e])||Array.isArray(u[e])){if("has"!==e.substr(0,3)||isNaN(u[e])){if("has"===e.substr(0,3)&&Array.isArray(u[e])){var l=t.filter(function(t,a){return n(t,r[a],o[a],i({},e.replace(/^has/,"is"),!0))});if(l.length<u[e][0]||l.length>u[e][1])return{v:!1}}}else if(t.filter(function(t,a){return n(t,r[a],o[a],i({},e.replace(/^has/,"is"),!0))}).length<u[e])return{v:!1}}else{var p=Object.assign({},u[e]),c=void 0===p.count?1:p.count;if(delete p.count,t.filter(function(t,a){return n(t,r[a],o[a],i({},e.replace(/^has/,"is"),p))}).length<c)return{v:!1}}};for(var c in u){var h=p(c);switch(h){case"continue":continue;default:if("object"===(void 0===h?"undefined":a(h)))return h.v}}return!0}},function(e,t,r){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports=function(e){return"object"===(void 0===e?"undefined":a(e))&&e.id?e:isNaN(e)?void 0:KC.db.ship_classes[parseInt(e)]}},function(e,t,r){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports=function(e){return"object"===(void 0===e?"undefined":a(e))&&e.id?e:isNaN(e)?void 0:KC.db.ship_types[parseInt(e)]}}]);